<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<meta name="description" content="BBN Marine OS is a free open source Linux for Raspberry Pi on boats. With BBN OS you can build a chartplotter, marine data computer including OpenCPN, SignalK, NMEA similar to openplotter">
<meta name="keywords" content="openplotter, opencpn, signalK, nmea, marine">
<meta name="author" content="mgrouch">
<title>Bareboat Necessities OS Documentation</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Bareboat Necessities OS Documentation</h1>
<div class="details">
<span id="author" class="author">mgrouch</span><br>
<span id="email" class="email"><a href="mailto:mgrouch@users.noreply.github.com">mgrouch@users.noreply.github.com</a></span><br>
<span id="revnumber">version 2024-02-03,</span>
<span id="revdate">Bareboat Necessities OS Documentation</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_getting_started">1. Getting Started</a>
<ul class="sectlevel2">
<li><a href="#_why_use_bbn_os">1.1. Why use BBN OS?</a>
<ul class="sectlevel3">
<li><a href="#_use_cases">1.1.1. Use Cases</a></li>
<li><a href="#_smart_boat">1.1.2. Smart Boat</a></li>
</ul>
</li>
<li><a href="#download">1.2. Download Image</a>
<ul class="sectlevel3">
<li><a href="#_32_bit_vs_64_bit_images">1.2.1. 32-bit vs 64-bit images</a></li>
</ul>
</li>
<li><a href="#_prepare_sd_card">1.3. Prepare SD Card</a></li>
<li><a href="#_first_boot_from_sd_card">1.4. First Boot from SD Card</a></li>
<li><a href="#_setting_up_network">1.5. Setting up Network</a>
<ul class="sectlevel3">
<li><a href="#_wired_ethernet">1.5.1. Wired Ethernet</a></li>
<li><a href="#_wi_fi_client">1.5.2. Wi-Fi Client</a></li>
<li><a href="#_wi_fi_access_point">1.5.3. Wi-Fi Access Point</a></li>
<li><a href="#tether">1.5.4. Using iPhone as Internet gateway</a></li>
<li><a href="#tether_android">1.5.5. Using Android phone as Internet gateway</a></li>
<li><a href="#_spacex_starlink">1.5.6. SpaceX Starlink</a></li>
<li><a href="#_typical_setup_on_a_boat">1.5.7. Typical Setup on a Boat</a></li>
</ul>
</li>
<li><a href="#_set_timezone_locale">1.6. Set Timezone / Locale</a></li>
<li><a href="#_change_password">1.7. Change Password</a></li>
<li><a href="#_international_keyboard">1.8. International Keyboard</a></li>
<li><a href="#_ssd_boot">1.9. SSD Boot</a></li>
<li><a href="#_set_up_gps">1.10. Set up GPS</a></li>
<li><a href="#_set_up_ais">1.11. Set up AIS</a></li>
<li><a href="#_update_opencpn_plugins">1.12. Update OpenCPN Plugins</a></li>
<li><a href="#_set_up_charts">1.13. Set up Charts</a>
<ul class="sectlevel3">
<li><a href="#_opencpn">1.13.1. OpenCPN</a>
<ul class="sectlevel4">
<li><a href="#_o_charts">O-Charts</a></li>
<li><a href="#_making_own_mbtiles_charts">Making own MbTiles charts</a></li>
</ul>
</li>
<li><a href="#_avnav">1.13.2. AvNav</a></li>
<li><a href="#_signalk_freeboard_sk_tuktuk">1.13.3. SignalK, FreeBoard-SK, TukTuk</a></li>
</ul>
</li>
<li><a href="#_set_up_your_ship_parameters">1.14. Set up your Ship Parameters</a></li>
<li><a href="#_signalk">1.15. SignalK</a></li>
<li><a href="#_pypilot">1.16. PyPilot</a>
<ul class="sectlevel3">
<li><a href="#_pypilot_motor_controller_wiring_to_pi_gpio">1.16.1. PyPilot Motor Controller Wiring to Pi GPIO</a></li>
<li><a href="#_pypilot_motor_controller_loading_firmware_into_mcu">1.16.2. PyPilot Motor Controller Loading Firmware into MCU</a></li>
<li><a href="#_typical_components_of_pypilot_motor_controller">1.16.3. Typical Components of PyPilot Motor Controller</a></li>
</ul>
</li>
<li><a href="#_ui_for_controlling_autopilots">1.17. UI for controlling autopilots</a></li>
<li><a href="#_weather">1.18. Weather</a>
<ul class="sectlevel3">
<li><a href="#_grib">1.18.1. GRIB</a></li>
<li><a href="#_noaa_weather_in_signalk">1.18.2. NOAA weather in SignalK</a></li>
<li><a href="#_noaa_weather_in_browser">1.18.3. NOAA weather in browser</a></li>
<li><a href="#_weatherfax">1.18.4. WeatherFax</a></li>
<li><a href="#_weather_routing">1.18.5. Weather routing</a></li>
</ul>
</li>
<li><a href="#_winlink_sailmail_analogue_for_raspberry_pi">1.19. WinLink (SailMail analogue) for Raspberry Pi</a></li>
<li><a href="#_music_players">1.20. Music Players</a>
<ul class="sectlevel3">
<li><a href="#_musicbox">1.20.1. MusicBox</a></li>
<li><a href="#_iris">1.20.2. Iris</a></li>
<li><a href="#_playing_from_your_iphone_spotify_etc">1.20.3. Playing from your iPhone (Spotify, etc)</a></li>
<li><a href="#_playing_from_mobile_phones_with_mpd_applications">1.20.4. Playing from mobile phones with MPD applications</a></li>
<li><a href="#_playing_spotify">1.20.5. Playing Spotify</a></li>
</ul>
</li>
<li><a href="#_interfacing_with_ship_systems">1.21. Interfacing with ship systems</a>
<ul class="sectlevel3">
<li><a href="#_nmea_0183">1.21.1. NMEA 0183</a>
<ul class="sectlevel4">
<li><a href="#_what_kind_of_messages_travel_via_nmea_0183">What kind of messages travel via NMEA 0183</a></li>
</ul>
</li>
<li><a href="#_nmea_2000">1.21.2. NMEA 2000</a>
<ul class="sectlevel4">
<li><a href="#_mcp2515_pican_m_etc">MCP2515 (Pican-M, etc)</a></li>
</ul>
</li>
<li><a href="#_imu">1.21.3. IMU</a></li>
<li><a href="#_barometer_temperature_humidity">1.21.4. Barometer / Temperature / Humidity</a></li>
<li><a href="#_other">1.21.5. Other</a></li>
</ul>
</li>
<li><a href="#_instrument_dashboards">1.22. Instrument Dashboards</a>
<ul class="sectlevel3">
<li><a href="#_opencpn_2">1.22.1. OpenCPN</a></li>
<li><a href="#_kip_signalk">1.22.2. KIP / SignalK</a></li>
</ul>
</li>
<li><a href="#_remote_access">1.23. Remote Access</a>
<ul class="sectlevel3">
<li><a href="#_vnc">1.23.1. VNC</a>
<ul class="sectlevel4">
<li><a href="#_realvnc_with_cloud_connectivity">RealVNC with cloud connectivity</a></li>
</ul>
</li>
<li><a href="#_ssh">1.23.2. ssh</a>
<ul class="sectlevel4">
<li><a href="#_raspcontroller">RaspController</a></li>
</ul>
</li>
<li><a href="#_android_devices">1.23.3. Android Devices</a></li>
<li><a href="#_browsers">1.23.4. Browsers</a></li>
<li><a href="#_casting_from_chromium_to_your_tv">1.23.5. Casting from Chromium to your TV</a></li>
<li><a href="#_smartphone_applications">1.23.6. SmartPhone Applications</a></li>
</ul>
</li>
<li><a href="#_headless_operation">1.24. Headless Operation</a></li>
<li><a href="#_marine_radio_ssb_sdr_ham">1.25. Marine Radio, SSB, SDR, HAM</a>
<ul class="sectlevel3">
<li><a href="#_included_decoders">1.25.1. Included Decoders</a>
<ul class="sectlevel4">
<li><a href="#_navtex">NavTex</a></li>
<li><a href="#_weatherfax_2">WeatherFax</a></li>
<li><a href="#_satellite_weather">Satellite Weather</a></li>
<li><a href="#_inmarsat_std_c">Inmarsat STD-C</a></li>
<li><a href="#_ais">AIS</a></li>
<li><a href="#_other_decoders">Other Decoders</a></li>
</ul>
</li>
<li><a href="#_winlink">1.25.2. WinLink</a>
<ul class="sectlevel4">
<li><a href="#_jpskmail">jpskmail</a></li>
<li><a href="#_winlink_pat">WinLink Pat</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_iridium_phone">1.26. Iridium Phone</a></li>
<li><a href="#_cameras">1.27. Cameras</a>
<ul class="sectlevel3">
<li><a href="#_ip_cameras">1.27.1. IP Cameras</a></li>
<li><a href="#_rpi_cameras_interface">1.27.2. RPI Cameras Interface</a></li>
<li><a href="#_motioneye">1.27.3. MotionEye</a></li>
</ul>
</li>
<li><a href="#_cruising_within_cellular_phone_reception">1.28. Cruising within Cellular Phone Reception</a></li>
<li><a href="#_offshore_features">1.29. Offshore Features</a></li>
<li><a href="#_watching_movies">1.30. Watching Movies</a></li>
<li><a href="#_drones">1.31. Drones</a></li>
<li><a href="#_shutting_down_rebooting">1.32. Shutting Down / Rebooting</a>
<ul class="sectlevel3">
<li><a href="#_safe_power_down">1.32.1. Safe Power-Down</a></li>
</ul>
</li>
<li><a href="#_customizing_desktop">1.33. Customizing Desktop</a>
<ul class="sectlevel3">
<li><a href="#_customizing_applications_menu">1.33.1. Customizing Applications Menu</a></li>
</ul>
</li>
<li><a href="#_customizing_on_first_boot">1.34. Customizing On First Boot</a></li>
<li><a href="#_known_issues_and_workarounds">1.35. Known Issues and Workarounds</a>
<ul class="sectlevel3">
<li><a href="#_touchscreen">1.35.1. Touchscreen</a></li>
<li><a href="#_opencpn_3">1.35.2. OpenCPN</a></li>
<li><a href="#_wi_fi_dns">1.35.3. Wi-Fi DNS</a></li>
<li><a href="#_under_voltage_detected">1.35.4. Under-Voltage Detected</a></li>
<li><a href="#_issues_during_first_boot">1.35.5. Issues during first boot</a></li>
</ul>
</li>
<li><a href="#_add_ons">1.36. Add-ons</a>
<ul class="sectlevel3">
<li><a href="#_text_to_speech">1.36.1. Text-to-speech</a></li>
<li><a href="#_navionics">1.36.2. Navionics</a></li>
<li><a href="#_qtvlm">1.36.3. QtVlm</a></li>
</ul>
</li>
<li><a href="#_default_ports">1.37. Default Ports</a></li>
<li><a href="#_firewall">1.38. Firewall</a></li>
<li><a href="#_bluetooth">1.39. Bluetooth</a></li>
<li><a href="#_amazon_alexa_etc">1.40. Amazon Alexa, etc</a></li>
<li><a href="#_qtvlm_chartplotter">1.41. QtVlm Chartplotter</a></li>
<li><a href="#_maritime_library">1.42. Maritime Library</a></li>
<li><a href="#_offline_wikipedia">1.43. Offline Wikipedia</a></li>
<li><a href="#_media_library">1.44. Media Library</a></li>
<li><a href="#_homeassistant">1.45. HomeAssistant</a>
<ul class="sectlevel3">
<li><a href="#_homeassistant_with_signalk">1.45.1. HomeAssistant with SignalK</a></li>
</ul>
</li>
<li><a href="#_solarthing_solar_power_monitoring">1.46. SolarThing (Solar Power Monitoring)</a></li>
<li><a href="#_maiana_ais">1.47. Maiana AIS</a></li>
<li><a href="#_victron">1.48. Victron</a></li>
<li><a href="#_marine_species_identification">1.49. Marine Species Identification</a></li>
<li><a href="#_knots">1.50. Knots</a></li>
<li><a href="#_colreg_regulations">1.51. ColReg Regulations</a></li>
<li><a href="#_sailing_education_and_certifications">1.52. Sailing Education and Certifications</a></li>
<li><a href="#_find_a_crew">1.53. Find a Crew</a></li>
<li><a href="#_suggestions">1.54. Suggestions</a></li>
<li><a href="#_hardware">1.55. Hardware</a></li>
<li><a href="#_printing">1.56. Printing</a></li>
<li><a href="#_social_networks_and_messaging">1.57. Social Networks and Messaging</a></li>
<li><a href="#_location_reporting">1.58. Location Reporting</a></li>
<li><a href="#_most_useful_features_for_average_short_cruises">1.59. Most useful features for average short cruises</a></li>
<li><a href="#_iot">1.60. IoT</a>
<ul class="sectlevel3">
<li><a href="#_mosquitto_mqtt_server">1.60.1. Mosquitto MQTT Server</a></li>
<li><a href="#_nodered">1.60.2. NodeRed</a></li>
</ul>
</li>
<li><a href="#_data_analytics">1.61. Data Analytics</a>
<ul class="sectlevel3">
<li><a href="#_grafana">1.61.1. Grafana</a></li>
<li><a href="#_influxdb">1.61.2. InfluxDB</a></li>
</ul>
</li>
<li><a href="#_power_consumption">1.62. Power consumption</a></li>
<li><a href="#_upgrading_your_system">1.63. Upgrading your System</a>
<ul class="sectlevel3">
<li><a href="#_verified_updates">1.63.1. Verified Updates</a></li>
<li><a href="#_all_other_updates">1.63.2. All Other Updates</a></li>
</ul>
</li>
<li><a href="#_data_flow">1.64. Data Flow</a></li>
</ul>
</li>
<li><a href="#_supported_hardware">2. Supported Hardware</a>
<ul class="sectlevel2">
<li><a href="#_monitors">2.1. Monitors</a>
<ul class="sectlevel3">
<li><a href="#_connecting_monitors">2.1.1. Connecting monitors</a></li>
<li><a href="#_brightness">2.1.2. Brightness</a></li>
<li><a href="#_round_touchscreens_for_gauges">2.1.3. Round touchscreens for gauges</a></li>
</ul>
</li>
<li><a href="#_rpi4_case">2.2. Rpi4 Case</a></li>
<li><a href="#_cm4_based_solutions">2.3. CM4 Based Solutions</a>
<ul class="sectlevel3">
<li><a href="#_home_assistant_yellow">2.3.1. Home Assistant Yellow</a></li>
</ul>
</li>
<li><a href="#_imu_compass_accelerometer_gyroscope">2.4. IMU, compass, accelerometer, gyroscope</a></li>
<li><a href="#_environmental_sensors">2.5. Environmental Sensors</a>
<ul class="sectlevel3">
<li><a href="#_barometer_temperature_humidity_i2c_sensors">2.5.1. Barometer, Temperature, Humidity I2C Sensors</a></li>
</ul>
</li>
<li><a href="#_ais_2">2.6. AIS</a></li>
<li><a href="#_radars">2.7. Radars</a></li>
<li><a href="#_usb_hubs">2.8. USB Hubs</a></li>
<li><a href="#_ltewi_fi_routers">2.9. LTE/Wi-Fi Routers</a></li>
<li><a href="#_sd_cards">2.10. SD Cards</a></li>
<li><a href="#_seatalk1">2.11. SeaTalk1</a></li>
<li><a href="#_bg_fastnet">2.12. B&amp;G Fastnet</a></li>
<li><a href="#_nmea_0183_2">2.13. NMEA 0183</a></li>
<li><a href="#_nmea_2000_2">2.14. NMEA 2000</a></li>
<li><a href="#_nmea_onenet_poe">2.15. NMEA OneNet, PoE</a></li>
<li><a href="#_sae_j1939">2.16. SAE J1939</a></li>
<li><a href="#_gps">2.17. GPS</a></li>
<li><a href="#_sdr_ssb">2.18. SDR, SSB</a></li>
<li><a href="#_ssd">2.19. SSD</a></li>
<li><a href="#_navtex_2">2.20. NavTex</a></li>
<li><a href="#_moitessier_hat">2.21. Moitessier HAT</a></li>
<li><a href="#_rtc_real_time_clock">2.22. RTC (Real Time Clock)</a></li>
<li><a href="#_sound_cards">2.23. Sound Cards</a></li>
<li><a href="#_cameras_2">2.24. Cameras</a>
<ul class="sectlevel3">
<li><a href="#_ip_cameras_2">2.24.1. IP Cameras</a></li>
<li><a href="#_connecting_cameras_to_csi_on_raspberry_pi">2.24.2. Connecting cameras to CSI on raspberry pi</a></li>
<li><a href="#_low_light_vision">2.24.3. Low light vision</a>
<ul class="sectlevel4">
<li><a href="#_night_vision_flir">Night vision FLIR</a></li>
</ul>
</li>
<li><a href="#_usb_connected_cameras">2.24.4. USB connected cameras</a></li>
</ul>
</li>
<li><a href="#_esp32_arduino">2.25. ESP32 / Arduino</a></li>
<li><a href="#_esp32_with_signalk">2.26. ESP32 with SignalK</a>
<ul class="sectlevel3">
<li><a href="#_bbn_esp32_projects">2.26.1. BBN Esp32 Projects</a></li>
<li><a href="#_platformio_ide">2.26.2. PlatformIO IDE</a></li>
</ul>
</li>
<li><a href="#_1_wire">2.27. 1-Wire</a></li>
<li><a href="#_iot_2">2.28. IoT</a></li>
<li><a href="#_power_12v_5v_converters">2.29. Power, 12v &#8594; 5v Converters</a>
<ul class="sectlevel3">
<li><a href="#_dc_voltage_converters">2.29.1. DC Voltage Converters</a></li>
<li><a href="#_power_management_victron_venus_os">2.29.2. Power Management, Victron, Venus OS</a></li>
</ul>
</li>
<li><a href="#_sonars">2.30. Sonars</a>
<ul class="sectlevel3">
<li><a href="#_echozilla_open_source_sonar">2.30.1. EchoZilla Open Source Sonar</a></li>
</ul>
</li>
<li><a href="#_drones_2">2.31. Drones</a></li>
<li><a href="#_ir_infrared">2.32. IR (Infrared)</a></li>
<li><a href="#_actuators">2.33. Actuators</a></li>
<li><a href="#_open_boat_projects">2.34. Open Boat Projects</a></li>
<li><a href="#_antennas">2.35. Antennas</a>
<ul class="sectlevel3">
<li><a href="#_vhf_ais">2.35.1. VHF, AIS</a></li>
<li><a href="#_wi_fi_lte4g">2.35.2. Wi-Fi, LTE/4G</a></li>
<li><a href="#_gps_2">2.35.3. GPS</a></li>
<li><a href="#_satellite_data_iridium_starlink_etc">2.35.4. Satellite Data (Iridium, StarLink, etc)</a></li>
<li><a href="#_fm_frequency_modulation">2.35.5. FM (Frequency Modulation)</a></li>
<li><a href="#_bluetooth_433mhz_fm_rf">2.35.6. Bluetooth, 433MHz FM RF</a></li>
<li><a href="#_zigbee_z_wave">2.35.7. Zigbee, Z Wave</a></li>
<li><a href="#_nfc">2.35.8. NFC</a></li>
<li><a href="#_rfid">2.35.9. RFID</a></li>
<li><a href="#_navtex_weatherfax">2.35.10. NavTex, WeatherFax</a></li>
<li><a href="#_ssb_ham">2.35.11. SSB, HAM</a></li>
<li><a href="#_lora">2.35.12. LoRa</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_how_you_can_help">3. How you can help</a></li>
<li><a href="#_howtos">4. HOWTOs</a>
<ul class="sectlevel2">
<li><a href="#_berrygps_imu_v3">4.1. BerryGPS-IMU V3</a></li>
<li><a href="#_other_wi_fi_drivers">4.2. Other Wi-Fi drivers</a></li>
<li><a href="#_cloud_storage">4.3. Cloud Storage</a></li>
<li><a href="#_backup">4.4. Backup</a></li>
<li><a href="#phone_gps">4.5. Using your smartphone as NMEA GPS receiver</a></li>
<li><a href="#_how_to_navigate_with_your_smartphone_as_gps_receiver_and_have_an_internet_access_on_a_boat_within_cellular_reception">4.6. How to navigate with your smartphone as GPS receiver and have an Internet access on a boat within cellular reception</a></li>
<li><a href="#_dual_monitor_setup">4.7. Dual monitor setup</a></li>
<li><a href="#_autostart_programs_on_desktop_startup">4.8. Autostart programs on desktop startup</a></li>
<li><a href="#running_with_higher_resolution_monitors">4.9. Running with Higher Resolution Monitors</a></li>
<li><a href="#_setting_up_multiple_wi_fi_access_points">4.10. Setting up multiple Wi-Fi access points</a></li>
<li><a href="#_watchdog">4.11. Watchdog</a></li>
<li><a href="#_troubleshooting_devttyxxxx_device_or_resource_busy">4.12. Troubleshooting /dev/ttyXXXX device or resource busy</a></li>
<li><a href="#_display_what_serial_devices_you_have">4.13. Display what serial devices you have</a></li>
<li><a href="#_display_what_usb_devices_you_have">4.14. Display what USB devices you have</a></li>
<li><a href="#_additional_software_via_pi_apps">4.15. Additional software via pi-apps</a></li>
<li><a href="#_good_ides_for_programmers">4.16. Good IDEs for programmers</a></li>
<li><a href="#_video_editing">4.17. Video Editing</a></li>
<li><a href="#_how_to_mount_imu">4.18. How to mount IMU</a></li>
<li><a href="#_waveshare_10_dof_install">4.19. WaveShare 10 dof install</a></li>
<li><a href="#_sound_via_hdmi">4.20. Sound via HDMI</a></li>
<li><a href="#_opencpn_upgrade">4.21. OpenCPN upgrade</a></li>
<li><a href="#_rtl_sdr">4.22. RTL SDR</a>
<ul class="sectlevel3">
<li><a href="#_rtl_ais">4.22.1. RTL AIS</a></li>
</ul>
</li>
<li><a href="#_tripwire">4.23. Tripwire</a></li>
<li><a href="#_setting_up_your_system_as_ntp_time_server">4.24. Setting up your system as NTP (time) server</a></li>
<li><a href="#_renaming_host">4.25. Renaming host</a></li>
<li><a href="#_profiling_opencpn">4.26. Profiling OpenCPN</a></li>
<li><a href="#_list_dependencies_of_a_package">4.27. List dependencies of a package</a></li>
<li><a href="#_how_to_use_vnc_without_monitor_attached_to_pi">4.28. How to use VNC without monitor attached to pi</a></li>
<li><a href="#_usb_over_ip">4.29. USB over IP</a></li>
<li><a href="#_remote_desktop_with_nomachine">4.30. Remote Desktop with NoMachine</a></li>
<li><a href="#_vr_remote_controller_for_raspberry_pi">4.31. VR Remote Controller for Raspberry Pi</a></li>
<li><a href="#_free_cloudflare_tunnel_to_homeassistant">4.32. Free Cloudflare Tunnel To HomeAssistant</a></li>
<li><a href="#airmail">4.33. Install AirMail on Raspberry Pi</a></li>
<li><a href="#sasplanet">4.34. Install SAS.Planet on Raspberry Pi</a></li>
<li><a href="#_install_qgis_gis">4.35. Install QGIS GIS</a></li>
<li><a href="#_protecting_electronics_from_environment">4.36. Protecting Electronics from Environment</a></li>
<li><a href="#_how_to_enable_hardware_acceleration_in_chromium_on_raspberry_pi_os_rpi_4">4.37. How To Enable Hardware Acceleration In Chromium On Raspberry Pi OS (RPi 4)</a></li>
<li><a href="#_sailing_performance_dashboard">4.38. Sailing Performance Dashboard</a></li>
<li><a href="#_screen_recording">4.39. Screen Recording</a></li>
<li><a href="#_calculating_wave_heightperiod_from_a_moving_boat_using_imu_accelerometer">4.40. Calculating wave height/period from a moving boat using IMU accelerometer</a></li>
<li><a href="#_finances_and_accounting">4.41. Finances and Accounting</a></li>
<li><a href="#_setting_up_monitor">4.42. Setting up monitor</a></li>
<li><a href="#_rotate_screen">4.43. Rotate Screen</a></li>
<li><a href="#_touchthink_marine_hdmi_touchscreen">4.44. TouchThink Marine HDMI Touchscreen</a></li>
</ul>
</li>
<li><a href="#_how_it_is_made">5. How it is Made</a>
<ul class="sectlevel2">
<li><a href="#_building_without_circleci">5.1. Building without CircleCi</a></li>
</ul>
</li>
<li><a href="#_comparison_vs_openplotter">6. Comparison vs OpenPlotter</a></li>
<li><a href="#_cost_of_open_source_system_vs_commercial_marine_electronics">7. Cost of Open Source System vs Commercial Marine Electronics</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>&#8203;<br></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/bareboat-necessities-logo.svg" alt="Bareboat Necessities Logo">
</div>
</div>
<div class="paragraph">
<p>&#8203;<br></p>
</div>
<div class="paragraph">
<p><a href="https://bareboat-necessities.github.io" class="bare">https://bareboat-necessities.github.io</a></p>
</div>
<div class="paragraph">
<p><a href="https://github.com/bareboat-necessities/lysmarine_gen" class="bare">https://github.com/bareboat-necessities/lysmarine_gen</a></p>
</div>
<div class="paragraph">
<p><a href="https://github.com/bareboat-necessities/lysmarine_gen/issues" class="bare">https://github.com/bareboat-necessities/lysmarine_gen/issues</a></p>
</div>
<div class="paragraph">
<p><a href="https://bareboat-necessities.wixsite.com/my-bareboat" class="bare">https://bareboat-necessities.wixsite.com/my-bareboat</a></p>
</div>
<div class="paragraph">
<p><a href="https://github.com/bareboat-necessities/bbn-m5stack-tough" class="bare">https://github.com/bareboat-necessities/bbn-m5stack-tough</a></p>
</div>
<div class="paragraph">
<p><a href="https://github.com/bareboat-necessities/bbn-nmea200-m5atom" class="bare">https://github.com/bareboat-necessities/bbn-nmea200-m5atom</a></p>
</div>
<div class="paragraph">
<p>&#8203;<br></p>
</div>
<div class="paragraph">
<p>PDF version:</p>
</div>
<div class="paragraph">
<p><a href="https://bareboat-necessities.github.io/my-bareboat/bareboat-os.pdf" class="bare">https://bareboat-necessities.github.io/my-bareboat/bareboat-os.pdf</a></p>
</div>
<div class="paragraph">
<p>&#8203;<br></p>
</div>
<!-- toc disabled -->
</div>
</div>
<div class="sect1">
<h2 id="_getting_started">1. Getting Started</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_why_use_bbn_os">1.1. Why use BBN OS?</h3>
<div class="paragraph">
<p>Why use BBN OS? Some people use just commercial marine electronics on board, some ones use smart tablets and marine
Wi-Fi multiplexers. All these solutions lack one important component - an onboard computer capable of monitoring
and controlling all aspects of the boat systems, and capable of storing data. Some people put an Intel-based computer for it.
Intel-based solutions are more power consuming. With BBN OS you can build a central boat computer meeting your needs.
All on low power consuming raspberry pi with flexibility of adding countless choices of sensors to talk to
all boat systems, Internet, local Wi-Fi, cameras, NMEA network, and a system able to decode marine radio protocols.
Initially this project started from experiences of using OpenPlotter to improve user experience.
BBN OS is free and open source. It is based on commonly used community supported open source projects such as SignalK,
PyPilot, OpenCPN, and others. BBN OS graphical user interface will let you build a cockpit front-end to all functionality
of the OS from chartplotting, dashboards, weather information, to media player, etc.</p>
</div>
<div class="sect3">
<h4 id="_use_cases">1.1.1. Use Cases</h4>
<div class="ulist">
<ul>
<li>
<p>Cockpit Touchscreen Chartplotter</p>
</li>
<li>
<p>Nav Station Computer</p>
</li>
<li>
<p>Desktop Computer</p>
</li>
<li>
<p>Pi Based Laptop</p>
</li>
<li>
<p>Headless Server</p>
</li>
<li>
<p>Media Player</p>
</li>
<li>
<p>Autopilot</p>
</li>
<li>
<p>SSB Radio Decoder</p>
</li>
<li>
<p>Marine Data Server, Multiplexer</p>
</li>
<li>
<p>Wi-Fi Access Point</p>
</li>
<li>
<p>Cameras Monitoring</p>
</li>
<li>
<p>Data Analytics Server</p>
</li>
<li>
<p>Weather Station</p>
</li>
<li>
<p>Boat Dashboards</p>
</li>
<li>
<p>File Server</p>
</li>
<li>
<p>Off-the-grid living</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_smart_boat">1.1.2. Smart Boat</h4>
<div class="imageblock">
<div class="content">
<img src="images/system-arch.svg" alt="Smart Boat" width="100%">
</div>
<div class="title">Figure 1. Smart Boat Diagram</div>
</div>
<div class="paragraph">
<p>&#8203;<br>
The diagram is color coded. Orange indicates what you (might) already have on your boat. Yellow are additions.
Green is Pi (the central element).</p>
</div>
<div class="paragraph">
<p>&#8203;<br></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="download">1.2. Download Image</h3>
<div class="paragraph">
<p>Download SD card image (~2.8Gb file):</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/bareboat-necessities/lysmarine_gen#download" class="bare">https://github.com/bareboat-necessities/lysmarine_gen#download</a></p>
</div>
<div class="paragraph">
<p>Alternative place to download if the previous link doesn&#8217;t work for you:</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/bareboat-necessities/lysmarine_gen/releases/tag/v2023-08-17" class="bare">https://github.com/bareboat-necessities/lysmarine_gen/releases/tag/v2023-08-17</a></p>
</div>
<div class="paragraph">
<p>Past major LTS release:</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/bareboat-necessities/lysmarine_gen/releases/tag/v2022-08-03" class="bare">https://github.com/bareboat-necessities/lysmarine_gen/releases/tag/v2022-08-03</a></p>
</div>
<div class="sect3">
<h4 id="_32_bit_vs_64_bit_images">1.2.1. 32-bit vs 64-bit images</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Default Bullseye image of BBN OS is fully arm64.
Default Buster image of BBN OS is 64-bit arm kernel with 32-bit armhf user space programs.
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>There are pros and cons to each</p>
</li>
<li>
<p>32-bit takes less memory but runs slower</p>
</li>
<li>
<p>You still can run 64-bit kernel with 32-bit image, user space programs will be 32-bit. (Add arm_64bit=1 into /boot/config.txt)</p>
</li>
<li>
<p>32-bit is available on more hardware</p>
</li>
<li>
<p>Most of the open (minor) issues are present in both 32 and 64-bit images</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As of time of writing this the best performance/compatibility is the 64-bit image.
Your preferred download image of BBN OS would be arm64 Bullseye.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Install arm64 Bullseye image</p>
</li>
<li>
<p>Proceed with all other configuration steps.</p>
</li>
<li>
<p>After establishing Internet connectivity install official hot fixes:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cd /home/user/add-ons
./hot-fixes-install.sh</code></pre>
</div>
</div>
</li>
<li>
<p>Reboot (One reboot after installation required to pick up all settings)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_prepare_sd_card">1.3. Prepare SD Card</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Starting with Bookworm version BBN OS has two images to choose from: LITE and FULL.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Write the downloaded image to SD card. Minimum 32Gb SD card recommended.
You can use Raspberry Pi Imager for that:</p>
</div>
<div class="paragraph">
<p><a href="https://www.raspberrypi.org/software/" class="bare">https://www.raspberrypi.org/software/</a></p>
</div>
<div class="paragraph">
<p>You do not need to explode .xz image file for it. You can load .xz file into RPI imager as is.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Do not change default user on the image by RPI imager advanced settings.
Do not use rpi-imager advanced tab at all. Burn the image to SD card as-is.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If your screen resolution is lower than 1024x600 you would need to manually
set it in /boot/config.txt file, by mounting /boot partition of your SD card
(on Windows its done just by inserting it into SD card slot and editing in a plain text
editor).</p>
</div>
<div class="paragraph">
<p>Quality of SD card is essential for performance of your system. BBN OS comes
with disk benchmarking tool. Good SD card would show about 45 MB/sec (or higher on pi4) read i/o speed,
90 MB/sec or higher on pi5. SSD drives would show much better
results: 178 MB/sec read and 147 MB/sec write i/o speed or higher.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
There were some cases of people just formatting SD card as fat32 file system and copying image file on it as-is,
in form of .xz file or in some cases going extra length unpacking it into .img file and copying.
Do not be like those guys. It can&#8217;t possibly work for any OS image for Raspberry Pi. Read the docs.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Also, there were cases of people trying to set up the system with VNC and not giving it full screen resolution.
Those characters were trying to use the system even without realizing they do not see the whole screen.
Obviously, they had really hard times, without succeeding. Again, read the docs.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_first_boot_from_sd_card">1.4. First Boot from SD Card</h3>
<div class="paragraph">
<p>Insert SD card into raspberry pi SD card slot, plug-in a mouse and a keyboard, and power on.
Wait for boot process to run GUI (about 2 mins).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Your touchscreen should be connected (HDMI and USB) and powered on during the first boot to be properly recognized
and touchscreen calibrated.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_setting_up_network">1.5. Setting up Network</h3>
<div class="sect3">
<h4 id="_wired_ethernet">1.5.1. Wired Ethernet</h4>
<div class="paragraph">
<p>If you have wired ethernet router you can just plug in your raspberry pi ethernet port into the
router</p>
</div>
</div>
<div class="sect3">
<h4 id="_wi_fi_client">1.5.2. Wi-Fi Client</h4>
<div class="paragraph">
<p>Go into network settings menu and delete Wi-Fi wireless access point.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You need to set up Wi-Fi country. In Bullseye version Wi-Fi may be disabled till you set Wi-Fi country.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Change /etc/wpa_supplicant/wpa_supplicant.conf to add line for your country (example):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>country=US</code></pre>
</div>
</div>
<div class="paragraph">
<p>Change /etc/default/crda to set your country (example):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>REGDOMAIN=US</code></pre>
</div>
</div>
<div class="paragraph">
<p>When raspberry pi Wi-Fi card discovers your Wi-Fi router network click to connect to Wi-Fi
and enter the correct Wi-Fi password.</p>
</div>
<div class="paragraph">
<p>When the password storage manager pops up to enter the password for your password storage I just normally leave it blank, so
I&#8217;m not prompted again.</p>
</div>
</div>
<div class="sect3">
<h4 id="_wi_fi_access_point">1.5.3. Wi-Fi Access Point</h4>
<div class="paragraph">
<p>Wi-Fi connections are managed by widely used Gnome NetworkManager. Look for 'nmcli' documentation
(command line interface to NetworkManager). Or you can figure it out from Administration/Advanced Network Settings
app menu. By default, OS image is set up to provide you with an access point.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In Bullseye version Wi-Fi may be disabled till you set Wi-Fi country.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="tether">1.5.4. Using iPhone as Internet gateway</h4>
<div class="paragraph">
<p>Enable Personal Hotspot on iphone. Plug it in into pi with BBN OS via USB and tell iPhone to trust the connected computer.
You will have a tethered Internet connection from your pi via iPhone (using usbmuxd).</p>
</div>
<div class="paragraph">
<p>You do not have to be plugged in into USB if your phone, and a boat computer are on the same local
Wi-Fi network.</p>
</div>
</div>
<div class="sect3">
<h4 id="tether_android">1.5.5. Using Android phone as Internet gateway</h4>
<div class="paragraph">
<p>Enable USB tethering in network settings on your Android phone. Plug it into your boat computer via USB.</p>
</div>
<div class="paragraph">
<p>The output of the command below should show a new route via usb0 interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">netstat -nr</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also do tethering via Wi-Fi instead of USB.</p>
</div>
</div>
<div class="sect3">
<h4 id="_spacex_starlink">1.5.6. SpaceX Starlink</h4>
<div class="paragraph">
<p>SpaceX Starlink Dishy is coming to boats soon and is easy to support.
Plenty of boaters are already using RV version.
Power usage might be relatively high for small boats.</p>
</div>
</div>
<div class="sect3">
<h4 id="_typical_setup_on_a_boat">1.5.7. Typical Setup on a Boat</h4>
<div class="ulist">
<ul>
<li>
<p>Raspberry Pi wired to OpenWrt LTE/4G/Wi-Fi router via ethernet port</p>
</li>
<li>
<p>Raspberry Pi provides 5GHz Wi-Fi 802.11ac local access point for boat local Wi-Fi network</p>
</li>
<li>
<p>OpenWrt LTE/4G/Wi-Fi router provides Wi-Fi connection to marinas</p>
</li>
<li>
<p>OpenWrt LTE/4G/Wi-Fi router provides access to the Internet via LTE/4G cellular data network</p>
</li>
<li>
<p>OpenWrt LTE/4G/Wi-Fi router provides 2.4GHz (Wi-Fi 802.11n) local access point for boat IoT devices</p>
</li>
<li>
<p>OpenWrt LTE/4G/Wi-Fi router serves as firewall</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you use raspberry pi Wi-Fi it is better to disable Wi-Fi power management:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sudo systemctl unmask wifi_powersave@off.service
sudo systemctl enable wifi_powersave@off.service
sudo systemctl start wifi_powersave@off.service</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
It is important to protect your installation from unauthorized access from the Internet. Make sure you put your
raspberry pi behind a router which adds a firewall protection. It is also important to change default passwords.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_set_timezone_locale">1.6. Set Timezone / Locale</h3>
<div class="paragraph">
<p>Open Terminal from GUI and on the terminal command line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cd ~/add-ons
./timezone-setup.sh</code></pre>
</div>
</div>
<div class="paragraph">
<p>For changing locale (ex: to en_US.UTF-8):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sudo su
perl -pi -e 's/# en_US.UTF-8 UTF-8/en_US.UTF-8 UTF-8/g' /etc/locale.gen
locale-gen en_US.UTF-8
update-locale en_US.UTF-8</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_change_password">1.7. Change Password</h3>
<div class="paragraph">
<p>Default user and root passwords are changeme. You would want to modify it before your computer connects on-line to
the Internet.</p>
</div>
<div class="paragraph">
<p>Open Terminal from GUI and on the terminal command line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cd ~/add-ons
./change-password.sh</code></pre>
</div>
</div>
<div class="paragraph">
<p>To change root password:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sudo su
passwd
exit</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_international_keyboard">1.8. International Keyboard</h3>
<div class="paragraph">
<p>Keyboard layout controlled by pre-installed ibus application. To add a language:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">ibus-setup</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ssd_boot">1.9. SSD Boot</h3>
<div class="paragraph">
<p>If you have an SSD drive, and you would like to boot from it (which would be a better way, and
it would greatly improve the performance of the system) then you can follow the steps below:</p>
</div>
<div class="paragraph">
<p>The OS image comes with utility called 'rpi-clone' preinstalled. If you have a custom case
for your raspberry pi (Ex. DeskPi Pro), then you would need to install vendor drivers for your
case per vendor instructions.</p>
</div>
<div class="paragraph">
<p>Open Terminal from GUI and your command line for rpi-clone should look like
(check usage <a href="https://github.com/billw2/rpi-clone" class="bare">https://github.com/billw2/rpi-clone</a> as there might be nuances for your particular
set up):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sudo rpi-clone sda</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Before doing it (if you had a previous installation), go into Disks tool from App Menu/Utilities/Disks
and remove all partitions from your SSD drive.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you have NVMe disk, then instead of sda it will be named as nvme0n1 (or something like that, check /dev/ directory).</p>
</div>
<div class="paragraph">
<p>Follow the prompts.</p>
</div>
</div>
<div class="sect2">
<h3 id="_set_up_gps">1.10. Set up GPS</h3>
<div class="paragraph">
<p>Plugin your GPS USB mouse and OS should recognize it. Check:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">ls -l /dev/ttyLYS*</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_set_up_ais">1.11. Set up AIS</h3>
<div class="paragraph">
<p>Plugin your dAISy AIS receiver into USB and OS should recognize it. Check:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">ls -l /dev/ttyLYS*</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_update_opencpn_plugins">1.12. Update OpenCPN Plugins</h3>
<div class="ulist">
<ul>
<li>
<p>Start OpenCPN</p>
</li>
<li>
<p>Go to Tools/Options/Plugins</p>
</li>
<li>
<p>Update Plugin Catalog</p>
</li>
<li>
<p>Browse plugins list and update plugins when an update available (one by one)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>OpenCPN Plugins Documentation:
<a href="https://rasbats.github.io/opencpn-plugins-manual/" class="bare">https://rasbats.github.io/opencpn-plugins-manual/</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_set_up_charts">1.13. Set up Charts</h3>
<div class="paragraph">
<p>OS image comes with several chartplotters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>OpenCPN</p>
</li>
<li>
<p>AvNav</p>
</li>
<li>
<p>Freeboard-SK</p>
</li>
<li>
<p>TukTuk</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>with extensive set of plugins as well as weather GRIB file viewers</p>
</div>
<div class="ulist">
<ul>
<li>
<p>XyGrib</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_opencpn">1.13.1. OpenCPN</h4>
<div class="ulist">
<ul>
<li>
<p>Start OpenCPN. Go into Tools/Options/Charts/Chart Downloader tab.</p>
</li>
<li>
<p>Click 'Add Catalog'. For USA: click USA NOAA &amp; Inland Charts / ENC / By Region.</p>
</li>
<li>
<p>Pick your region, click (or touch) 'OK'</p>
</li>
<li>
<p>Click 'Update' (to update the catalog)</p>
</li>
<li>
<p>Click 'Download Charts&#8230;&#8203;' tab</p>
</li>
<li>
<p>Right-click (or long touch) in the charts list</p>
</li>
<li>
<p>Click 'Select all' from the pop-up menu</p>
</li>
<li>
<p>Press 'Download selected charts' button, and wait for it to finish</p>
</li>
<li>
<p>Press 'Apply' button</p>
</li>
<li>
<p>Click 'Chart Files' tab</p>
</li>
<li>
<p>Press 'Prepare all ENC Charts' button</p>
</li>
<li>
<p>Press 'OK' button when done.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>O-Charts can be registered using preinstalled OpenCPN plugins (on arm32 user space make sure to update plugins on-line
from OpenCPN catalog) with O-Charts USB dongle or key.</p>
</div>
<div class="sect4">
<h5 id="_o_charts">O-Charts</h5>
<div class="paragraph">
<p>O-Charts are commercial charts compatible with OpenCPN. See: <a href="https://www.o-charts.org/" class="bare">https://www.o-charts.org/</a></p>
</div>
<div class="paragraph">
<p>O-Charts can be shared between OpenCPN and AvNav via AvNav o-charts plugin.</p>
</div>
<div class="paragraph">
<p>Use of USD Key Dongle is recommended over key file, so you do not lose your charts access after upgrades.</p>
</div>
</div>
<div class="sect4">
<h5 id="_making_own_mbtiles_charts">Making own MbTiles charts</h5>
<div class="paragraph">
<p>Making own MbTiles charts with SASPlanet:
<a href="http://svocelot.com/Cruise_Info/Equipment/mbTiles.htm" class="bare">http://svocelot.com/Cruise_Info/Equipment/mbTiles.htm</a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_avnav">1.13.2. AvNav</h4>
<div class="paragraph">
<p>When you are online NOAA raster MB tiles should work out of the box. You can install offline charts
by following AvNav documentation.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
NOAA is phasing out RNC charts in favor of ENC.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can download NOAA MB Tiles from offline use here:
<a href="https://distribution.charts.noaa.gov/ncds/index.html" class="bare">https://distribution.charts.noaa.gov/ncds/index.html</a></p>
</div>
<div class="paragraph">
<p>O-Charts can be registered using AvNav plugin
with O-Charts USB dongle or key.</p>
</div>
</div>
<div class="sect3">
<h4 id="_signalk_freeboard_sk_tuktuk">1.13.3. SignalK, FreeBoard-SK, TukTuk</h4>
<div class="paragraph">
<p>Follow SignalK documentation to install offline charts for these.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_set_up_your_ship_parameters">1.14. Set up your Ship Parameters</h3>
<div class="paragraph">
<p>Do not forget to set up your ship parameters in SignalK and Vessel applications.
They can come handy.</p>
</div>
<div class="paragraph">
<p>Also in OpenCPN Polar plugin pick a polar file for your boat from ~/Polars,
/usr/share/opencpn/plugins/weather_routing_pi/data/polars/
or build it from your past voyages data recordings. It will be needed for weather routing, etc.</p>
</div>
<div class="paragraph">
<p>Polars are important for Weather Routing and Dashboard Tactics plugins.</p>
</div>
</div>
<div class="sect2">
<h3 id="_signalk">1.15. SignalK</h3>
<div class="paragraph">
<p>SignalK manages its own updates. Login into SignalK Marine Data Server web UI application
and perform updates via its app store.</p>
</div>
<div class="paragraph">
<p>For SignalK support visit: <a href="https://signalk-dev.slack.com/" class="bare">https://signalk-dev.slack.com/</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_pypilot">1.16. PyPilot</h3>
<div class="paragraph">
<p>Starting PyPilot server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sudo systemctl enable pypilot@pypilot
sudo systemctl start pypilot@pypilot</code></pre>
</div>
</div>
<div class="paragraph">
<p>Apart from the official PyPilot documentation you will find this WiKi
<a href="https://github.com/pypilot/workbook/wiki" class="bare">https://github.com/pypilot/workbook/wiki</a> very useful as well.</p>
</div>
<div class="paragraph">
<p>Commercial PyPilot hardware: <a href="https://pcnautic.gitbook.io/autopilot/inhoud-autopilot-set" class="bare">https://pcnautic.gitbook.io/autopilot/inhoud-autopilot-set</a></p>
</div>
<div class="paragraph">
<p>If you have pypilot arduino motor controller connected via GPIO pins you need to add</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>dtoverlay=disable-bt

enable_uart=1</code></pre>
</div>
</div>
<div class="paragraph">
<p>in your /boot/config.txt to disable conflicting bluetooth UART.
Your motor controller will use that on-board UART.</p>
</div>
<div class="paragraph">
<p>Check:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">ls -l /dev/serial0</code></pre>
</div>
</div>
<div class="paragraph">
<p>/dev/serial0 must point to /dev/ttyAMA0</p>
</div>
<div class="paragraph">
<p>On bookworm version you also need to disable the hciuart service, which initialises the Bluetooth modem:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>sudo systemctl disable hciuart</code></pre>
</div>
</div>
<div class="paragraph">
<p>Serial console must be disabled too. Check /boot/cmdline.txt</p>
</div>
<div class="paragraph">
<p>You will need to remove /dev/ttyAMA0 from /home/pypilot/.pypilot/blacklist_serial_ports
to let pypilot probe that port. (otherwise, pypilot port-probing breaks bluetooth even if bluetooth is enabled)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sudo nano /home/pypilot/.pypilot/blacklist_serial_ports</code></pre>
</div>
</div>
<div class="paragraph">
<p>PyPilot HAT is optional. It provides a remote IR control and a small LCD.
If you have pypilot hardware hat attached, then you will need to enable the following settings in /boot/config.txt</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>dtoverlay=gpio-ir,gpio_pin=4

dtparam=i2c_arm=on
dtparam=spi=on
#dtparam=i2s=on</code></pre>
</div>
</div>
<div class="paragraph">
<p>and enable pypilot hat service to start at boot time:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sudo systemctl enable pypilot_hat

sudo systemctl enable lircd</code></pre>
</div>
</div>
<div class="paragraph">
<p>For hat display to work you need to specify correct driver (ex: nokia5110) in /home/pypilot/.pypilot/hat.conf.
Edit this file when pypilot_hat service is not running.</p>
</div>
<div class="paragraph">
<p>Later hardware of pypilot hat creates /proc/device-tree/hat/custom_0 file from its firmware.
You can do</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cat /proc/device-tree/hat/custom_0</code></pre>
</div>
</div>
<div class="paragraph">
<p>to see hat configuration and its GPIO pins required to be set up and so on.</p>
</div>
<div class="paragraph">
<p>For steering by the wind set wind.sensors_height to your wind sensor height as pypilot tries to compensate
for apparent wind created by boat motion.</p>
</div>
<div class="sect3">
<h4 id="_pypilot_motor_controller_wiring_to_pi_gpio">1.16.1. PyPilot Motor Controller Wiring to Pi GPIO</h4>
<div class="paragraph">
<p>For brushed DC motors:
<a href="https://pypilot.org/schematics/hbridge_datasheet.htm" class="bare">https://pypilot.org/schematics/hbridge_datasheet.htm</a></p>
</div>
<div class="paragraph">
<p>Hydraulic motor controller:
<a href="https://pypilot.org/schematics/highpower_datasheet.htm" class="bare">https://pypilot.org/schematics/highpower_datasheet.htm</a></p>
</div>
<div class="paragraph">
<p><a href="https://pypilot.org/wiki/doku.php?id=tinypilot" class="bare">https://pypilot.org/wiki/doku.php?id=tinypilot</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_pypilot_motor_controller_loading_firmware_into_mcu">1.16.2. PyPilot Motor Controller Loading Firmware into MCU</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Building your own firmware should be considered experimental. It&#8217;s always better to load
tested firmware for a tested controller model/make.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Follow instructions:
<a href="https://github.com/pypilot/pypilot/tree/master/arduino/motor" class="bare">https://github.com/pypilot/pypilot/tree/master/arduino/motor</a></p>
</div>
<div class="paragraph">
<p>You might need to use updated Makefile from:
<a href="https://raw.githubusercontent.com/bareboat-necessities/my-bareboat/master/pypilot/arduino/motor/Makefile" class="bare">https://raw.githubusercontent.com/bareboat-necessities/my-bareboat/master/pypilot/arduino/motor/Makefile</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_typical_components_of_pypilot_motor_controller">1.16.3. Typical Components of PyPilot Motor Controller</h4>
<div class="ulist">
<ul>
<li>
<p>IBT_2 H-bridge module</p>
</li>
<li>
<p>Arduino nano with ATmega328P chipset</p>
</li>
<li>
<p>10k NTC (2 wires) temperature sensor for the motor</p>
</li>
<li>
<p>Rudder feedback potentiometer</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For compass IMU connected to Pi (that&#8217;s not really a part of motor controller)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>icm20948 IMU</p>
</li>
<li>
<p>mpu9255 IMU</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ui_for_controlling_autopilots">1.17. UI for controlling autopilots</h3>
<div class="paragraph">
<p>There are three options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>NMEA 2000 autopilots can be controlled by adding autopilot page in SignalK KIP dashboard or
(experimental) in SignalK autopilot plugin.</p>
</li>
<li>
<p>Raymarine Autohelm SeaTalk autopilots can be controlled by SignalK plugin. This UI works as a web application and uses
authentication cookie from SignalK nativefier application, so make sure you log in (with 'remember me' option) to SignalK
UI application and set SignalK session timeout (in SignalK security settings) to a large value. Otherwise, you will
get authentications errors trying to control your autopilot during your cruise.</p>
</li>
<li>
<p>DIY PyPilot plugins can be controlled 3 ways: by OpenCPN plugin, standalone PyPilot UI application, or
PyPilot Web application.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_weather">1.18. Weather</h3>
<div class="paragraph">
<p>You can add weather budgie desktop applet. Unfortunately it is linked to a fixed location which is
fine for a day-sailor but doesn&#8217;t work for others.</p>
</div>
<div class="paragraph">
<p>Offshore sailors or even coastal cruisers should focus on using XyGrib and GRIB plugin for OpenCPN.</p>
</div>
<div class="paragraph">
<p>For real blue water sailors OpenCPN Climatology and OpenCPN weather routing plugins are essential.</p>
</div>
<div class="paragraph">
<p>Mediterranean GRIB files: <a href="https://openskiron.org/en/" class="bare">https://openskiron.org/en/</a></p>
</div>
<div class="paragraph">
<p>Marine Weather Center: <a href="https://mwxc.com/" class="bare">https://mwxc.com/</a></p>
</div>
<div class="sect3">
<h4 id="_grib">1.18.1. GRIB</h4>
<div class="paragraph">
<p>Launch xyGrib. Select an area on the map. Click to download Grib file.
Choose Atmospheric Model and Wave Model. Pick Wind, Wind Gust options in Surface Data
and Wave Height in Wave Data. Click Download.</p>
</div>
<div class="paragraph">
<p>Now you can overlay this GRIB data on OpenCPN chart. You can play Grib file forecast forward.
Enable GRIB plugin in OpenCPN. Click on GRIB plugin in OpenCPN plugin toolbar.
Load GRIB file into OpenCPN. See weather data overlaid over your chart.</p>
</div>
<div class="paragraph">
<p>OpenCPN GRIB plugin can also prepare SailDoc email requests for Grib files.
You can store them and email via Internet (if you have connection) or use
WinLink Pat (WinLink client: <a href="https://github.com/la5nta/pat/wiki" class="bare">https://github.com/la5nta/pat/wiki</a>) via SSB radio,
or using JPSKMail.</p>
</div>
</div>
<div class="sect3">
<h4 id="_noaa_weather_in_signalk">1.18.2. NOAA weather in SignalK</h4>
<div class="paragraph">
<p>SignalK comes with NOAA weather plugin. After you configure it, weather alerts will
show up in KIP dashboard.</p>
</div>
</div>
<div class="sect3">
<h4 id="_noaa_weather_in_browser">1.18.3. NOAA weather in browser</h4>
<div class="paragraph">
<p><a href="https://www.nhc.noaa.gov/marine/" class="bare">https://www.nhc.noaa.gov/marine/</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_weatherfax">1.18.4. WeatherFax</h4>
<div class="paragraph">
<p>WeatherFax OpenCPN plugin is capable of downloading weather faxes from Internet as well as capturing
them from SSB radio via audio input. (Pi needs a sound card with audio input because it is sold without
audio input card). Just as GRIB files they can be overlaid over charts.</p>
</div>
</div>
<div class="sect3">
<h4 id="_weather_routing">1.18.5. Weather routing</h4>
<div class="paragraph">
<p>Weather routing OpenCPN plugin is able to plan your trip route. It uses your boat polar diagram, so
make sure you have built it in advance using Polar plugin, or download it for your boat.
Few places to check:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>SeaPilot <a href="https://www.seapilot.com/" class="bare">https://www.seapilot.com/</a></p>
</li>
<li>
<p>ORC-data <a href="https://github.com/jieter/orc-data" class="bare">https://github.com/jieter/orc-data</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You also need to download climatology data using OpenCPN climatology plugin, and
download a grib file. They are also needed and used in weather routing.
Your request for a grib file should also ask for tide and currents data in order
for them to be taken into the account by routing algorithms.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_winlink_sailmail_analogue_for_raspberry_pi">1.19. WinLink (SailMail analogue) for Raspberry Pi</h3>
<div class="paragraph">
<p>To install:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cd ~/add-ons
./winlink-pat-install.sh</code></pre>
</div>
</div>
<div class="paragraph">
<p>Documentation on setting it up and using it:</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/la5nta/pat/wiki" class="bare">https://github.com/la5nta/pat/wiki</a>
<a href="https://getpat.io/" class="bare">https://getpat.io/</a></p>
</div>
<div class="paragraph">
<p>Video Series:
Winlink on a Raspberry Pi
<a href="https://www.youtube.com/playlist?list=PL1QTYT4Qo9cY98NFmxrTvtGyWI9pgxtFq" class="bare">https://www.youtube.com/playlist?list=PL1QTYT4Qo9cY98NFmxrTvtGyWI9pgxtFq</a></p>
</div>
<div class="paragraph">
<p>ARDOP for pi: <a href="https://www.cantab.net/users/john.wiseman/Documents/ARDOPC.html" class="bare">https://www.cantab.net/users/john.wiseman/Documents/ARDOPC.html</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_music_players">1.20. Music Players</h3>
<div class="paragraph">
<p>The OS image comes with Mopidy, MPD server, MusicBox, Shairport-Sync (AirPlay) server.
The default audio output set up to audio jack port.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
With Bullseye based versions it&#8217;s possible to switch audio sources without modifying /boot/config.txt and
without rebooting.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_musicbox">1.20.1. MusicBox</h4>
<div class="paragraph">
<p>Start MusicBox web UI. Try pre-configured playlist, or you can search Tune-In or YouTube.</p>
</div>
</div>
<div class="sect3">
<h4 id="_iris">1.20.2. Iris</h4>
<div class="paragraph">
<p>Iris is an alternative player to MusicBox. Iris is also included in the BBN OS image.</p>
</div>
</div>
<div class="sect3">
<h4 id="_playing_from_your_iphone_spotify_etc">1.20.3. Playing from your iPhone (Spotify, etc)</h4>
<div class="paragraph">
<p>Play music on iPhone. Select AirPlay on your iPhone and cast to 'lysmarine' airplay target (your phone must be
on lysmarine-hotspot Wi-Fi).</p>
</div>
</div>
<div class="sect3">
<h4 id="_playing_from_mobile_phones_with_mpd_applications">1.20.4. Playing from mobile phones with MPD applications</h4>
<div class="paragraph">
<p>Install MPD compatible media player on your mobile device, and from it, you can
control playing your Mopidy library on your raspberry pi.</p>
</div>
</div>
<div class="sect3">
<h4 id="_playing_spotify">1.20.5. Playing Spotify</h4>
<div class="paragraph">
<p>Start your Spotify app on your mobile device which is connected to boat Wi-Fi.
Select 'Lysmarine' device as target to play on your pi via raspotify. You need to have a premium Spotify account.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_interfacing_with_ship_systems">1.21. Interfacing with ship systems</h3>
<div class="paragraph">
<p>The first place to start configuring boat interfaces would be SignalK.
SignalK comes with many plugins to talk to many boat devices with the support of various
protocols.</p>
</div>
<div class="sect3">
<h4 id="_nmea_0183">1.21.1. NMEA 0183</h4>
<div class="paragraph">
<p>If you use FTDI USB serial to USB sticks the OS should recognize them right away,
and if they are wired correctly to NMEA devices (ex: wind/depth/speed/GPS) their reading
should automatically show up in instrument dashboards.</p>
</div>
<div class="paragraph">
<p>When wiring NMEA 0183 devices:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Transmit (Tx) (+) should connect to a receive (Rx) (+)
Tx (-) should connect to a Rx (-)
Rx (+) should connect to a Tx (+)
Rx (-) should connect to a Tx (-)</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>In the event the sending device has a Tx (-), but there is not a corresponding Rx (-) on the receiving device, leave the sending device’s Tx (-) disconnected. Failure to follow this guideline can damage the sending device.</p>
</li>
<li>
<p>In the event that the receiving device has a Rx (-), but there is no corresponding Tx (-) on the sending device, bring the Rx (-) to ground.</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_what_kind_of_messages_travel_via_nmea_0183">What kind of messages travel via NMEA 0183</h5>
<div class="paragraph">
<p>Sentence messages (max 82 characters in length) started with "$" or "!" and ending with "*" then two-characters checksum and
a carriage return and line feed(&lt;CR&gt;&lt;LF&gt;). Checksum can be optional.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Regular NMEA 0183 (GNSS, Autopilot, Compass, Wind/Speed/Depth/Temperature/Pressure, Engine, Rudder,
Chartplotter waypoints, routes, tracking)</p>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nmea" data-lang="nmea">$GPAAM,A,A,0.10,N,WPTNME*32
$APHDM,256.740,M*31
$APROT,0.004,A*33</code></pre>
</div>
</div>
</li>
<li>
<p>XDR Transducer Sentences NMEA 0183</p>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nmea" data-lang="nmea">$APXDR,A,30.900,D,PTCH*41
$APXDR,A,9.239,D,ROLL*68</code></pre>
</div>
</div>
</li>
<li>
<p>Vendor extensions NMEA 0183</p>
<div class="paragraph">
<p>Sentences start with "$P" followed by 3-letter manufacturer code.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nmea" data-lang="nmea">$PASHR,085335.000,224.19,T,-01.26,+00.83,+00.00,0.101,0.113,0.267,1,0*06</code></pre>
</div>
</div>
</li>
<li>
<p>AIS</p>
<div class="paragraph">
<p>Sentences start with "!"</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nmea" data-lang="nmea">!AIVDM,1,1,,A,14eG;o@034o8sd&lt;L9i:a;WF&gt;062D,0*7D</code></pre>
</div>
</div>
</li>
<li>
<p>DSC - Digital Selective Calling</p>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nmea" data-lang="nmea">$CDDSC,12,3380400790,12,06,00,1423108312,2019,,,S,E*6A
$CDDSC,12,3381581370,12,06,00,1423108312,0236,3381581370,,S,*20
$CDDSC,20,3381581370,00,21,26,1423108312,1902,,,B,E*7B
$CDDSE,1,1,A,3380400790,00,45894494*1B</code></pre>
</div>
</div>
</li>
<li>
<p>STALK (SeaTalk1 over NMEA 0183)</p>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nmea" data-lang="nmea">$STALK,84,56,e,0,0,0,0,0,8*0F</code></pre>
</div>
</div>
</li>
<li>
<p>NavTex</p>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nmea" data-lang="nmea">$CRNRX,007,001,00,TD02,1,135600,27,06,2001,241,3,A,==========================*09
$CRNRX,007,002,00,,,,,,,,,,========^0D^0AISSUED ON SATURDAY 06 JANUARY 2001.*29
$CRNRX,007,003,00,,,,,,,,,,^0D^0AINSHORE WATERS FORECAST TO 12 MILES^0D^0AOFF*0D
$CRNRX,007,004,00,,,,,,,,,,SHORE FROM 1700 UTC TO 0500 UTC.^0D^0A^0D^0ANORT*70
$CRNRX,007,005,00,,,,,,,,,,H FORELAND TO SELSEY BILL.^0D^0A12 HOURS FOREC*16
$CRNRX,007,006,00,,,,,,,,,,AST:^0D^0A^0ASHOWERY WINDS, STRONGEST IN NORTH.^0D*15
$CRNRX,007,007,00,,,,,,,,,,^0A^0A*79</code></pre>
</div>
</div>
</li>
<li>
<p>Radar NMEA Sentences</p>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nmea" data-lang="nmea">$RARSD,,,,,,,,,0.000,000.2,0.125,N,N*50
$RARSD,,,,,,,,,0.145,244.5,0.125,N,N*55
$RARSD,0.883,099.3,0.200,047.6,,,,,0.145,245.2,0.1 25,N,N*54
$RARSD,0.150,233.5,0.177,086.4,,,,,0.150,233.5,0.1 25,N,N*59
$RARSD,0.251,243.9,0.177,087.5,0.376,131.3,0.167,0 11.5,0.376,131.3,0.25 ,N,N*5,N,N*5
$RATTM,01,0.438,018.6,T,0.00,180.0,T,0.438,0.0,N,T GT 01,Q,,180540.43,M*50
$RATTM,01,0.438,018.9,T,0.99,103.5,T,0.438,0.0,N,T GT 01,T,,180600.47,M*57</code></pre>
</div>
</div>
</li>
<li>
<p>Safety Messages (Inmarsat-C)</p>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nmea" data-lang="nmea">/g:1-9-1234,s:egcterm1,n:213,c:1333636200*hh/$CSSM3,123456,005213,798,0,3,14,00,2012,04,05,14,30,3400,N,076,W,300*hh
/g:2-9-1234,n:214*hh/$CSSMB,008,001,0,123456,FROM:Maritime Rescue Coordination Centre xxx^0D^0ATO:*hh
/g:3-9-1234,n:215*hh/$CSSMB,008,002,0,123456, ALL SHIPS IN xxxxxxx^0D^0ASAR SITREP NO: 02^0D^0AFIS*hh
/g:4-9-1234,n:216*hh/$CSSMB,008,003,0,123456,HING BOAT 'xxx' WITH THREE PERSONS ON BOARD DEPARRTED*hh
/g:5-9-1234,n:217*hh/$CSSMB,008,004,0,123456, FROM xxx ISLAND ON^0D^0Axxx AT NOONTIME AND SINCE TH*hh
/g:6-9-1234,n:218*hh/$CSSMB,008,005,0,123456,EN NO INFORMATION ABOUT HER. PARTICULARS ...^0D^0ASHI*hh
/g:7-9-1234,n:219*hh/$CSSMB,008,006,0,123456,PS SAILING IN VICINITY ARE KINDLY REQUESTED TO KEEP A*hh
/g:8-9-1234,n:220*hh/$CSSMB,008,007,0,123456, SHARP LOOK OUT^0D^0AINFORMING MRCC^0D^0AREGARDS^0D*hh
/g:9-9-1234,n:221*hh/$CSSMB,008,008,0,123456,^0A DUTY OFFICER*hh</code></pre>
</div>
</div>
</li>
<li>
<p>NMEA 0183 Amended Messages (MOB, SMV)</p>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nmea" data-lang="nmea">$INMOB,ABCDE,V,123456.987,0,311219,132456.876,12.34,N,123.45,E,12.34,23.45,269104520,0*53
$CSSMV,2,1,5,12,123456789,,1234.5678.N,12345.6789,W,2018,01,23,12,34,D*35
$CSSMV,2,2,5,12,123456789,MAXIMUM LENGTH FOR VESSEL NAME,,,,,,,,,D*25</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_nmea_2000">1.21.2. NMEA 2000</h4>
<div class="paragraph">
<p>Check SignalK plugin settings and SignalK documentation.</p>
</div>
<div class="sect4">
<h5 id="_mcp2515_pican_m_etc">MCP2515 (Pican-M, etc)</h5>
<div class="paragraph">
<p>For board with MCP2515 (Standalone Controller Area Network (CAN) controller) such as Pican-M, number of CM4 boards
equipped with CAN Bus module, the setup procedure is usually:</p>
</div>
<div class="paragraph">
<p>Putting the line into /boot/config.txt:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>dtoverlay=mcp2515-can0,oscillator=16000000,interrupt=25</code></pre>
</div>
</div>
<div class="paragraph">
<p>That should create a CAN Bus network interface (socketcan) after reboot. It&#8217;s same type of interface you would see with ifconfig command.</p>
</div>
<div class="paragraph">
<p>Then you would need to enable the service which starts can0 network interface on boot:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sudo systemctl enable socketcan-interface
sudo systemctl start socketcan-interface</code></pre>
</div>
</div>
<div class="paragraph">
<p>After that you should be able to see some data from CAN Bus using:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">candump can0</code></pre>
</div>
</div>
<div class="paragraph">
<p>Use Ctrl-C to interrupt it.</p>
</div>
<div class="paragraph">
<p>Then you can create a data connection in SignalK:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Data type: NMEA 2000</p>
</li>
<li>
<p>NMEA 2000 Source: Canbus (canboatjs)</p>
</li>
<li>
<p>Interface: can0</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_imu">1.21.3. IMU</h4>
<div class="paragraph">
<p>Check PyPilot settings and PyPilot documentation.</p>
</div>
<div class="paragraph">
<p>General steps are</p>
</div>
<div class="ulist">
<ul>
<li>
<p>enable i2c (Interface options)</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cd ~/add-ons
./os-settings.sh</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Enable pypilot service</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sudo systemctl enable pypilot@pypilot
sudo systemctl start pypilot@pypilot</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>At this point you should be able to see reading of pitch/roll, etc. and magnetic heading in pypilot control.
Which you would need to calibrate.</p>
</li>
<li>
<p>Shutdown SignalK. Start pypilot calibration. Press 'Boat Level' when the boat leveled. (Your IMU must be obviously
mounted hard to the boat, can&#8217;t be just hanging).
For magnetic heading: IMU doesn&#8217;t know how you oriented it inside (where bow is pointing), so you need to adjust
it by filling magnetic heading adjustment field. Start SignalK.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
After calibration give pypilot 2-3 mins to run without restart to store settings. It is recommended to set
heading offset to non-zero value (between -180 and 180). Setting it to zero will make pypilot to use
GPS COG, POS, and magnetic variation to calculate heading offset dynamically (assuming no current or leeway)
when boat is moving (i.e. assuming COG is true heading). Making a 360-degrees turn each time after leaving marinas or
anchorages can help keeping your IMU compass stay calibrated for each voyage.
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>Establish connection from PyPilot to SignalK (restart PyPilot just before doing it to get a fresh valid request)</p>
</li>
<li>
<p>Go to SignalK web UI as admin and approve the access request from PyPilot for READ/WRITE access.</p>
</li>
<li>
<p>IMU data should start flowing into SignalK</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
What is considered as a pitch and what is a roll would depend on heading calibration offset. With 90 degrees
heading offset pitch and roll swap and so on. So before hitting 'Boat is level' button in calibration screen
make sure you put correct heading offset on same screen (your bow heading on the 3D screen needs to match heading
from the other compass you are using for calibration). PyPilot allows offsets in range -180, 180. Other values are
ignored.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Additional IMU and sensors settings adjustments are stored in /home/pypilot/RTIMULib.ini file.
See more: <a href="https://github.com/seandepagnier/RTIMULib2/tree/master/Linux" class="bare">https://github.com/seandepagnier/RTIMULib2/tree/master/Linux</a>
and <a href="https://github.com/seandepagnier/RTIMULib2" class="bare">https://github.com/seandepagnier/RTIMULib2</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_barometer_temperature_humidity">1.21.4. Barometer / Temperature / Humidity</h4>
<div class="paragraph">
<p>Check SignalK plugin settings and SignalK documentation.</p>
</div>
<div class="paragraph">
<p>General steps are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>enable i2c (Interface options)</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cd ~/add-ons
./os-settings.sh</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>To check if it&#8217;s working:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">lsmod | grep i2c-dev
i2cdetect 1</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Login into SignalK Marine Data Server</p>
</li>
<li>
<p>Enable BMP or BME sensor plugin. Give it correct i2c address. Reduce poll timeout to 20 sec.</p>
</li>
<li>
<p>Change 'salon.inside' to 'outside' (one word) for OpenCPN to display readings.</p>
</li>
<li>
<p>Restart SignalK server.</p>
</li>
<li>
<p>At this point you should be able to see barometric pressure and temperature (possibly humidity)
in your data feed.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_other">1.21.5. Other</h4>
<div class="paragraph">
<p>Many other devices are supported (usually via SignalK)</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_instrument_dashboards">1.22. Instrument Dashboards</h3>
<div class="sect3">
<h4 id="_opencpn_2">1.22.1. OpenCPN</h4>
<div class="paragraph">
<p>Enable OpenCPN 'Dashboard' plugin, add instruments. Dashboards are dockable to the right on bottom of OpenCPN canvas.</p>
</div>
</div>
<div class="sect3">
<h4 id="_kip_signalk">1.22.2. KIP / SignalK</h4>
<div class="ulist">
<ul>
<li>
<p>Load KIP demo. In setting of KIP dashboard change the URL to <a href="http://localhost:3000" class="bare">http://localhost:3000</a></p>
</li>
<li>
<p>You should request KIP token to be registered in SignalK, then go into SignalK app and
authorize it. After that edit instruments and layout in KIP dashboard settings.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="https://48north.com/boats-and-gear/gear-reviews/supercharge-your-boats-information-gathering-with-signal-k/" class="bare">https://48north.com/boats-and-gear/gear-reviews/supercharge-your-boats-information-gathering-with-signal-k/</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_remote_access">1.23. Remote Access</h3>
<div class="sect3">
<h4 id="_vnc">1.23.1. VNC</h4>
<div class="paragraph">
<p>BBN OS image comes with RealVNC server pre-installed and ready to be used on the local network.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
You need to change the authentication method or the default unix user password before connecting the
system to the Internet.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>OS image also provides VNC client app.</p>
</div>
<div class="sect4">
<h5 id="_realvnc_with_cloud_connectivity">RealVNC with cloud connectivity</h5>
<div class="paragraph">
<p>Create an account on realvnc.com website. Login from your pi&#8217;s RealVNC server into
realvnc.com cloud using the account you set up. Set up a password on your pi&#8217;s VNC server for
users to connect. While being logged in into realvnc.com website create a team and invite
people you want to have remote desktop access to your pi. When they accept your invite
let them know the password to connect to your local VNC server. They would need to download
realVNC viewer (can be for PC, Linux, Mac, etc.) and follow the instructions from the invite.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ssh">1.23.2. ssh</h4>
<div class="paragraph">
<p>OS image comes with ssh enabled. You can log in using ssh user: 'user'.</p>
</div>
<div class="sect4">
<h5 id="_raspcontroller">RaspController</h5>
<div class="paragraph">
<p>RaspController is available in Google Play for your Android phone or tablet, and in
App Store for Apple mobile devices. It allows remotely control your raspberry pi.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_android_devices">1.23.3. Android Devices</h4>
<div class="paragraph">
<p>OS image comes with scrcpy pre-installed and pre-configured. You can view and control your Android devices.
You need to enable USB debugging on your Android device or follow the instructions
to enable controlling it via Wi-Fi. See: <a href="https://github.com/Genymobile/scrcpy" class="bare">https://github.com/Genymobile/scrcpy</a>
In most cases you just need to enable USB debugging on your Android device and plug it in (thanks to autoadb).</p>
</div>
<div class="paragraph">
<p>Using this feature you can see your Android Navionics applications on BBN OS screen (as example).</p>
</div>
</div>
<div class="sect3">
<h4 id="_browsers">1.23.4. Browsers</h4>
<div class="paragraph">
<p>The URLs of the applications on your boat computer:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://lysmarine:8080" class="bare">http://lysmarine:8080</a> PyPilot</p>
</li>
<li>
<p><a href="http://lysmarine:3000" class="bare">http://lysmarine:3000</a> SignalK</p>
</li>
<li>
<p><a href="http://lysmarine:3000/@mxtommy/kip/" class="bare">http://lysmarine:3000/@mxtommy/kip/</a> KIP</p>
</li>
<li>
<p><a href="http://lysmarine:3000/@signalk/signalk-node-red" class="bare">http://lysmarine:3000/@signalk/signalk-node-red</a> Node Red</p>
</li>
<li>
<p><a href="http://lysmarine:3000/admin/#/e/_signalk_vesselpositions" class="bare">http://lysmarine:3000/admin/#/e/_signalk_vesselpositions</a> Vessels Positions</p>
</li>
<li>
<p><a href="http://lysmarine:3000/tuktuk-chart-plotter/" class="bare">http://lysmarine:3000/tuktuk-chart-plotter/</a> TukTuk Chartplotter</p>
</li>
<li>
<p><a href="http://lysmarine:3000/@signalk/signalk-autopilot/" class="bare">http://lysmarine:3000/@signalk/signalk-autopilot/</a> SK Autopilot</p>
</li>
<li>
<p><a href="http://lysmarine:3000/@signalk/freeboard-sk" class="bare">http://lysmarine:3000/@signalk/freeboard-sk</a> SK Freeboard</p>
</li>
<li>
<p><a href="http://lysmarine:8099" class="bare">http://lysmarine:8099</a> AvNav</p>
</li>
<li>
<p><a href="http://lysmarine:6680" class="bare">http://lysmarine:6680</a> Mopidy</p>
</li>
<li>
<p><a href="http://lysmarine:6680/musicbox_webclient/" class="bare">http://lysmarine:6680/musicbox_webclient/</a> Mopidy MusicBox</p>
</li>
<li>
<p><a href="http://lysmarine:6680/iris/" class="bare">http://lysmarine:6680/iris/</a> Mopidy Iris</p>
</li>
<li>
<p><a href="http://lysmarine:8765" class="bare">http://lysmarine:8765</a> MotionEye Cameras</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Make sure your lysmarine computer is mapped to a static IP address on your network via MAC address mapping on your router.</p>
</div>
</div>
<div class="sect3">
<h4 id="_casting_from_chromium_to_your_tv">1.23.5. Casting from Chromium to your TV</h4>
<div class="paragraph">
<p>You can start Chromium and cast browser tab or whole desktop to your smart TV via ChromeCast protocol
using Chromium menu 'Cast' option and selecting an appropriate source. Your TV and your boat computer need to be
on the same network (LAN or Wi-Fi).</p>
</div>
</div>
<div class="sect3">
<h4 id="_smartphone_applications">1.23.6. SmartPhone Applications</h4>
<div class="paragraph">
<p>There are many applications for smartphones which will take live NMEA data stream from your boat computer
host: lysmarine, port: 10110.</p>
</div>
<div class="paragraph">
<p>There are several ones which will even discover SignalK and use SignalK protocol. Examples: SignalK Monitor, SignalK.</p>
</div>
<div class="paragraph">
<p>Your phone and your boat computer need to be on the same Wi-Fi network.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_headless_operation">1.24. Headless Operation</h3>
<div class="paragraph">
<p>It&#8217;s possible to disable booting into GUI by running:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sudo raspi-config</code></pre>
</div>
</div>
<div class="paragraph">
<p>and selecting booting into the console under System Options / Boot - Auto Login.</p>
</div>
</div>
<div class="sect2">
<h3 id="_marine_radio_ssb_sdr_ham">1.25. Marine Radio, SSB, SDR, HAM</h3>
<div class="paragraph">
<p>OS image comes with many HAM radio applications, decoders for many marine specific
signals and protocols. Many SDR products should work. Decoding is also possible using
external HAM receivers connected via sound input port (USB sound card required as raspberry pi
doesn&#8217;t have built-in sound input). Proper antennas required for correct reception.</p>
</div>
<div class="paragraph">
<p>HAM Radio menu contains a few applications useful especially for offshore sailors.
If you do not have a cellular or a satellite connection, you still have SSB (and if you installed it SDR) radio.
These applications will allow you (with some skill and set up):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Receive weather GRIBs via WinLink</p>
</li>
<li>
<p>Receive and decode WeatherFax, NavTex, NOAA and satellite weather images, Inmarsat Fleet messages</p>
</li>
<li>
<p>Send and receive emails via WinLink (requires you to have a HAM amateur radio license)</p>
</li>
<li>
<p>SDR can help you to decode AIS, and ADS-B (aviation analogue of AIS)</p>
</li>
<li>
<p>Control your rig (SSB/SDR) with raspberry pi and monitor</p>
</li>
<li>
<p>and more</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_included_decoders">1.25.1. Included Decoders</h4>
<div class="sect4">
<h5 id="_navtex">NavTex</h5>
<div class="paragraph">
<p>JNX <a href="https://arachnoid.com/JNX/" class="bare">https://arachnoid.com/JNX/</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_weatherfax_2">WeatherFax</h5>
<div class="paragraph">
<p>JWX <a href="https://arachnoid.com/JWX/" class="bare">https://arachnoid.com/JWX/</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_satellite_weather">Satellite Weather</h5>
<div class="paragraph">
<p>noaa-apt  <a href="https://github.com/martinber/noaa-apt" class="bare">https://github.com/martinber/noaa-apt</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_inmarsat_std_c">Inmarsat STD-C</h5>
<div class="paragraph">
<p>stdcdec <a href="https://github.com/cropinghigh/stdcdec" class="bare">https://github.com/cropinghigh/stdcdec</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_ais">AIS</h5>
<div class="paragraph">
<p>aisdecoder  <a href="https://www.aishub.net/ais-decoder" class="bare">https://www.aishub.net/ais-decoder</a></p>
</div>
<div class="paragraph">
<p>rtl_ais  <a href="https://github.com/dgiardini/rtl-ais" class="bare">https://github.com/dgiardini/rtl-ais</a></p>
</div>
<div class="paragraph">
<p>Starting with BBN Marine OS version 2022-11-10 AIS-Catcher <a href="https://github.com/jvde-github/AIS-catcher" class="bare">https://github.com/jvde-github/AIS-catcher</a> is included as well.
AIS-Catcher can use many other SDRs, apart from RTL to decode AIS.</p>
</div>
</div>
<div class="sect4">
<h5 id="_other_decoders">Other Decoders</h5>
<div class="paragraph">
<p>Explore HAM Radio menu for more software.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_winlink">1.25.2. WinLink</h4>
<div class="sect4">
<h5 id="_jpskmail">jpskmail</h5>
<div class="paragraph">
<p><a href="https://www.pskmail.org/" class="bare">https://www.pskmail.org/</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_winlink_pat">WinLink Pat</h5>
<div class="paragraph">
<p><a href="https://github.com/la5nta/pat" class="bare">https://github.com/la5nta/pat</a></p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_iridium_phone">1.26. Iridium Phone</h3>
<div class="paragraph">
<p>BBN OS will help you to use Iridium Phone as a modem for low bandwidth Internet access, or
to send periodic short burst data with use of a specially written SignalK plugin.</p>
</div>
<div class="paragraph">
<p>More on using Iridium as modem: <a href="https://agile4life.blog/2018/07/16/sailing-with-linux-nmea-gpsd-iridium/" class="bare">https://agile4life.blog/2018/07/16/sailing-with-linux-nmea-gpsd-iridium/</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_cameras">1.27. Cameras</h3>
<div class="sect3">
<h4 id="_ip_cameras">1.27.1. IP Cameras</h4>
<div class="paragraph">
<p>Should be easy to integrate using pre-installed VLC.
See URL in /var/www/bbn-launcher/constants.js</p>
</div>
<div class="paragraph">
<p>IP cameras usually have some delay in video display.</p>
</div>
</div>
<div class="sect3">
<h4 id="_rpi_cameras_interface">1.27.2. RPI Cameras Interface</h4>
<div class="paragraph">
<p>To enable cameras interface on raspberry pi4 run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sudo raspi-config</code></pre>
</div>
</div>
<div class="paragraph">
<p>and enable camera interface in there.</p>
</div>
</div>
<div class="sect3">
<h4 id="_motioneye">1.27.3. MotionEye</h4>
<div class="paragraph">
<p>By default, motioneye service installed and enabled. To disable:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sudo systemctl disable motioneye
sudo systemctl stop motioneye
sudo systemctl status motioneye</code></pre>
</div>
</div>
<div class="paragraph">
<p>Default user: admin</p>
</div>
<div class="paragraph">
<p>Password is empty.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_cruising_within_cellular_phone_reception">1.28. Cruising within Cellular Phone Reception</h3>
<div class="paragraph">
<p>Adding some OpenWrt LTE/4G router greatly improves your boat connectivity to
the world near shore. You should definitely do it to have internet access from your boat.</p>
</div>
<div class="paragraph">
<p>The OS image gives you internet applications for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Email</p>
</li>
<li>
<p>Chat</p>
</li>
<li>
<p>FB</p>
</li>
<li>
<p>YouTube</p>
</li>
<li>
<p>Browser</p>
</li>
<li>
<p>On-Line Weather</p>
</li>
<li>
<p>On-Line Charts</p>
</li>
<li>
<p>Marina Booking</p>
</li>
<li>
<p>Sailing Education</p>
</li>
<li>
<p>SMS</p>
</li>
<li>
<p>and much more</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_offshore_features">1.29. Offshore Features</h3>
<div class="paragraph">
<p>For offshore sailors there are number of features preloaded into the OS image</p>
</div>
<div class="ulist">
<ul>
<li>
<p>NavTex</p>
</li>
<li>
<p>Inmarsat Fleet (receiving messages)</p>
</li>
<li>
<p>Using Iridium as modem</p>
</li>
<li>
<p>WeatherFax</p>
</li>
<li>
<p>GRIB (could be over SSB)</p>
</li>
<li>
<p>WinLink</p>
</li>
<li>
<p>SDR / HAM Radio Apps</p>
</li>
<li>
<p>AIS</p>
</li>
<li>
<p>Weather Routing / Climatology</p>
</li>
<li>
<p>Celestial Navigation</p>
</li>
<li>
<p>Autopilot (PyPilot)</p>
</li>
<li>
<p>Satellite Weather</p>
</li>
<li>
<p>Radars (several supported)</p>
</li>
<li>
<p>Location Reporting</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>They do require additional hardware, set up and dedication.</p>
</div>
<div class="paragraph">
<p>PyPilot based autopilots:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://pypilot.org/store/" class="bare">https://pypilot.org/store/</a></p>
</li>
<li>
<p><a href="https://pcnautic.nl/nl/autopilot" class="bare">https://pcnautic.nl/nl/autopilot</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These features would be particularly interesting for offshore sailors:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>AirMail <a href="#airmail">Install AirMail on Raspberry Pi</a></p>
</li>
<li>
<p>SASPlanet <a href="#sasplanet">Install SAS.Planet on Raspberry Pi</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_watching_movies">1.30. Watching Movies</h3>
<div class="paragraph">
<p>Watching on-line (or listening) prepaid copyrighted content (Netflix, Amazon PrimeVideo, Google, Spotify, etc.) in
a web browser as Chromium requires closed-source DRM libraries. On arm32 version of the OS you can install it
from add-ons folder ~/add-ons/ by running:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">./widevine-lib-install.sh</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
As of moment of writing this procedure doesn&#8217;t work on arm64. It does work on arm32, and even on
arm32 with 64-bit kernel.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_drones">1.31. Drones</h3>
<div class="paragraph">
<p>Late versions of BBN OS include software for controlling drones. So if you have a drone (or a fleet of drones)
you might be able to control them from the same BBN display.</p>
</div>
<div class="paragraph">
<p>The software included is APM Planner 2.0. See:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/ArduPilot/apm_planner" class="bare">https://github.com/ArduPilot/apm_planner</a></p>
</li>
<li>
<p><a href="https://ardupilot.org/planner2/" class="bare">https://ardupilot.org/planner2/</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It supports MAVlink based autopilots including APM and PX4/Pixhawk:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Copters</p>
</li>
<li>
<p>Helicopters</p>
</li>
<li>
<p>Planes</p>
</li>
<li>
<p>VTOL/QuadPlanes</p>
</li>
<li>
<p>Rovers</p>
</li>
<li>
<p>Subs</p>
</li>
<li>
<p>Vehicles</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>List of supported drones:</p>
</div>
<div class="paragraph">
<p><a href="https://ardupilot.org/planner2/docs/common-rtf.html" class="bare">https://ardupilot.org/planner2/docs/common-rtf.html</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_shutting_down_rebooting">1.32. Shutting Down / Rebooting</h3>
<div class="paragraph">
<p>On the desktop click on the 'Commands' icon. You will see a menu from where
you can perform restart/shutdown, and more.</p>
</div>
<div class="sect3">
<h4 id="_safe_power_down">1.32.1. Safe Power-Down</h4>
<div class="paragraph">
<p>Raspberry pi doesn&#8217;t have a safe power-off feature. I.e. it doesn&#8217;t perform OS shutdown before
powering off with a button. There are numerous third-party solutions with raspberry pi hats or
custom cases. Make sure you do not forget to install required software for them per vendor documentation.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_customizing_desktop">1.33. Customizing Desktop</h3>
<div class="paragraph">
<p>Desktop can be customized by editing the JavaScript files in /var/www/bbn-launcher (i.e. constants.js).</p>
</div>
<div class="paragraph">
<p>PyPilot web client looks better in dark skin. Switch to the dark theme if it wasn&#8217;t done for you automatically.</p>
</div>
<div class="sect3">
<h4 id="_customizing_applications_menu">1.33.1. Customizing Applications Menu</h4>
<div class="paragraph">
<p>Applications menu can be customized by editing gnome-applications.menu in ~/.config/menus.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_customizing_on_first_boot">1.34. Customizing On First Boot</h3>
<div class="paragraph">
<p>You can add additional customizations which will be performed on system first boot by
mounting OS image and editing /boot/first-boot.sh script. That script as its name suggests
executes only once on the first boot.</p>
</div>
</div>
<div class="sect2">
<h3 id="_known_issues_and_workarounds">1.35. Known Issues and Workarounds</h3>
<div class="paragraph">
<p>See: <a href="https://github.com/bareboat-necessities/lysmarine_gen/issues" class="bare">https://github.com/bareboat-necessities/lysmarine_gen/issues</a></p>
</div>
<div class="paragraph">
<p>If GPS fix is lost in OpenCPN the first thing to try is to restart SignalK. You can do it from the touchscreen
via desktop 'Commands' icon.</p>
</div>
<div class="paragraph">
<p>Do not create data loops with your data flows between OpenCPN, AvNav, SignalK, GPSd, Kplex, PyPilot.</p>
</div>
<div class="sect3">
<h4 id="_touchscreen">1.35.1. Touchscreen</h4>
<div class="paragraph">
<p>BBN Open Source Marine Linux OS for Raspberry Pi by Bareboat Necessities
is customized for best touchscreen support (due to need to support cockpit touchscreen chartplotter).</p>
</div>
<div class="paragraph">
<p>On screen keyboard, Two finger zoom, Long touch, Double finger tap, Three finger scroll are supported.
No finger rotate (so far), Copy/paste is via on-screen keyboard.</p>
</div>
<div class="paragraph">
<p>There are sometimes timing issues with USB ports initialization during first boot. If you see touchscreen
not being calibrated then try (after establishing Internet connectivity and with your touchscreen
properly connected):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cd /home/user/add-ons
./hot-fixes-install.sh</code></pre>
</div>
</div>
<div class="paragraph">
<p>Use the same procedure if you change your touchscreen to another one.</p>
</div>
<div class="paragraph">
<p>Check your /usr/share/X11/xorg.conf.d/90-touchinput.conf file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cat /usr/share/X11/xorg.conf.d/90-touchinput.conf</code></pre>
</div>
</div>
<div class="paragraph">
<p>If MatchProduct string in it is empty you will need to put it in manually.
First find the product:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cat /var/log/Xorg.0.log | grep TOUCH</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then copy and paste product name into MatchProduct section</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sudo nano /usr/share/X11/xorg.conf.d/90-touchinput.conf</code></pre>
</div>
</div>
<div class="paragraph">
<p>and save the file.</p>
</div>
<div class="paragraph">
<p>Calibration issues can be resolved by running:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">xinput_calibrator</code></pre>
</div>
</div>
<div class="paragraph">
<p>and following on-screen instructions.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The touchscreen issues mentioned below fixed since 2021-09-10 release.
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>Some applications (namely OpenCPN and gtk2 based as well as some Qt) sometimes stop responding to touch events.
There is a workaround. With your finger you can toggle a maximized mode via window frame icon, then you
MOVE the window frame by dragging window header few pixels, and switch back to maximized mode if needed.
This should restore touch events in that app.</p>
</li>
<li>
<p>Some gtk3 applications menus (ex: terminal) have issues handling touch events. You can select a menu item
with touch but to perform a click on it, you would actually need to perform simulated right click
by holding finger a bit longer and letting it go.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_opencpn_3">1.35.2. OpenCPN</h4>
<div class="paragraph">
<p>OpenCPN feature to auto hide toolbar on timer seems causing OpenCPN to hang under some conditions. Avoid it and
keep it turned off.</p>
</div>
</div>
<div class="sect3">
<h4 id="_wi_fi_dns">1.35.3. Wi-Fi DNS</h4>
<div class="paragraph">
<p>If you use your devices on LAN or Wi-Fi networks they might get assigned different IP addresses from DHCP servers.
However, DNS servers tend to cache (remember) name to IP address mappings for quite some time.
Thus, you can run into DNS name resolution issues if you do not configure DHCP servers to assign
consistent IP addresses (by MAC address for example) to all your devices.</p>
</div>
<div class="paragraph">
<p>Another situation which can cause name resolution issues in DNS is when one device configured
to be able to choose multiple Wi-Fi networks to connect to.</p>
</div>
</div>
<div class="sect3">
<h4 id="_under_voltage_detected">1.35.4. Under-Voltage Detected</h4>
<div class="paragraph">
<p>If you see this message it means you have a poor power supply for your Pi and some of your connected devices will not work.
In that case you need higher amps power supply and raspberry Pi with many devices connected needs 5.2 volts
power input.</p>
</div>
</div>
<div class="sect3">
<h4 id="_issues_during_first_boot">1.35.5. Issues during first boot</h4>
<div class="ulist">
<ul>
<li>
<p>Did you wait long enough for desktop to boot?</p>
</li>
<li>
<p>Are you having too many devices plugged in? You just need a keyboard, mouse, touchscreen (video and USB), and
possibly ethernet.</p>
</li>
<li>
<p>Do you see under-voltage message when you run 'dmesg' from command line?</p>
</li>
<li>
<p>Was SD card burned and verified successfully?</p>
</li>
<li>
<p>Are you using pi4, CM4 (with Wi-Fi), or pi400?</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_add_ons">1.36. Add-ons</h3>
<div class="paragraph">
<p>Check /home/user/add-ons directory. It contains number of scripts for installing many additional programs
which for one or another reason couldn&#8217;t be a part of the distribution image.</p>
</div>
<div class="paragraph">
<p>Few notable add-ons:</p>
</div>
<div class="sect3">
<h4 id="_text_to_speech">1.36.1. Text-to-speech</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cd /home/user/add-ons
./text-to-speech-install.sh</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_navionics">1.36.2. Navionics</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cd /home/user/add-ons
./navionics-demo-install.sh</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_qtvlm">1.36.3. QtVlm</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cd /home/user/add-ons
./qtvlm-install.sh</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_default_ports">1.37. Default Ports</h3>
<div class="paragraph">
<p>See:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sudo netstat -tulpen</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Proto  Port       Transport            Program/Service
tcp    22         ssh                  sshd Secure Remote Shell
tcp    25         smtp                 exim4 e-mail
tcp    139        netbios              smbd
tcp    445        smb                  smbd
tcp    631        CUPS                 cupsd Printing
tcp    2947       gpsd                 gpsd
tcp    3000       http/WS              SignalK
tcp    4713       pulseaudio           pulseaudio audio
tcp    4997       http                 bbn-desktop
tcp    5000       airplay              shairport-sync music
tcp    5037       adb                  android adb
tcp    5900       vnc                  x11vnc
tcp    6600       mpd                  Mopidy MPD Music
tcp    6680       http                 Mopidy Music
tcp    8080       http                 PyPilot_web
tcp    8082       http                 AvNav Ocharts
tcp    8085       http                 AvNav Updater
tcp    8099       http                 AvNav
tcp    8375       http/json            SignalK Deltas
tcp    8765       http                 motioneye
tcp    10110      NMEA 0183            SignalK
tcp    20220      NMEA 0183            PyPilot
tcp    23322      json                 PyPilot
tcp    34567      NMEA 0183            AvNav NMEA out
tcp    dynamic    spotify              librespot
udp    68         DHCP                 dhclient
udp    137        nmb                  nmbd
udp    138        nmb                  nmbd
udp    323        ntp                  chronyd time service
udp    631        IPP                  CUPS Internet Printing Protocol
udp    5353       service discovery    avahi-daemon, chromium, others (bonjour, zeroconf, mDNS)
udp    10116      NMEA 0183            AvNav, KPlex</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_firewall">1.38. Firewall</h3>
<div class="paragraph">
<p>Starting with BBN OS version 2021-10-02 you will have a firewall running on your system, and it&#8217;s enabled by default.
The default firewall rules are:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>sudo ufw status

Status: active

To                         Action      From
--                         ------      ----
Anywhere                   ALLOW       192.168.0.0/16
Anywhere                   ALLOW       169.254.0.0/16
Anywhere                   ALLOW       10.0.0.0/8
Anywhere                   ALLOW       100.64.0.0/10
Anywhere                   ALLOW       172.16.0.0/12
Anywhere                   ALLOW       224.0.0.0/4/udp
Anywhere on can0           ALLOW       Anywhere
Anywhere (v6)              ALLOW       fd00::/8
Anywhere (v6)              ALLOW       fe80::/10
Anywhere (v6)              ALLOW       ff00::/8/udp
Anywhere (v6) on can0      ALLOW       Anywhere (v6)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_bluetooth">1.39. Bluetooth</h3>
<div class="paragraph">
<p>As of 2021-10-04 Bluetooth seems good only for low speed devices.
You likely to experience skipping playing music via on-board pi bluetooth.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Versions 2021-11-29 and after have this issue fixed. Make sure you close bluetooth setting window
before playing from a bluetooth device.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_amazon_alexa_etc">1.40. Amazon Alexa, etc</h3>
<div class="paragraph">
<p>Set it up to be on your boat Wi-Fi. You can also pair it with your pi via Bluetooth and play music via Amazon
EchoDot, etc. Mopidy seems needs a restart to switch to Bluetooth playing.</p>
</div>
<div class="paragraph">
<p>Say "Alexa, pair a device". Proceed to device pairing. Make sure you close bluetooth settings window
in BBN OS before playing music to avoid skipping.</p>
</div>
</div>
<div class="sect2">
<h3 id="_qtvlm_chartplotter">1.41. QtVlm Chartplotter</h3>
<div class="paragraph">
<p>QtVlm can be installed via add-ons:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cd /home/user/add-ons
./qtvlm-install.sh</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_maritime_library">1.42. Maritime Library</h3>
<div class="paragraph">
<p>You can install your Maritime Publications On-Board Library via add-ons:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cd /home/user/add-ons
./maritime-lib-install.sh</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_offline_wikipedia">1.43. Offline Wikipedia</h3>
<div class="paragraph">
<p>Using preinstalled Kiwix application you can store offline Wikipedia and more on your boat computer.</p>
</div>
</div>
<div class="sect2">
<h3 id="_media_library">1.44. Media Library</h3>
<div class="paragraph">
<p>You can install JellyFin via add-ons:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cd /home/user/add-ons
./jellyfin-install.sh</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_homeassistant">1.45. HomeAssistant</h3>
<div class="paragraph">
<p>You can install HomeAssistant (for many BBN users their boat is their home) via add-ons.
You need to be connected to Internet, and give 15 mins or so after the below commands finish:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cd /home/user/add-ons
./homeassistant-install.sh</code></pre>
</div>
</div>
<div class="paragraph">
<p>It will also install EspHome. Url to access: <a href="http://localhost:6052" class="bare">http://localhost:6052</a></p>
</div>
<div class="paragraph">
<p>Examples of use cases:</p>
</div>
<div class="paragraph">
<p><a href="https://boathackers.com/boat-energy-management-using-victron-and-home-assistant/" class="bare">https://boathackers.com/boat-energy-management-using-victron-and-home-assistant/</a></p>
</div>
<div class="paragraph">
<p><a href="https://boathackers.com/dynamically-set-location-in-home-assistant-for-boats/" class="bare">https://boathackers.com/dynamically-set-location-in-home-assistant-for-boats/</a></p>
</div>
<div class="paragraph">
<p>ESP32 devices can be managed using <a href="https://esphome.io" class="bare">https://esphome.io</a></p>
</div>
<div class="sect3">
<h4 id="_homeassistant_with_signalk">1.45.1. HomeAssistant with SignalK</h4>
<div class="ulist">
<ul>
<li>
<p>Enable "Signal K - MQTT Home Assistant Bridge" plugin in SignalK
(with run local server option, port 2883)</p>
</li>
<li>
<p>In Home assistant add MQTT integration
Broker: lysmarine
Port: 2883
Subscribe Topic:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>+/+/#</code></pre>
</div>
</div>
</li>
<li>
<p>Edit /home/homeassistant/.homeassistant/configuration.yaml</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">mqtt: # SignalK MQTT HA Bridge
  # https://developers.home-assistant.io/docs/core/entity/sensor/
  sensor:
    - name: "Wind App Speed"
      unique_id: "speedApparent"
      #device_class: "wind_speed"
      state_topic: "vessels/self/environment/wind/speedApparent"
      unit_of_measurement: "kn"
      value_template: "{{ (value_json * 1.9438452) | round(1) }}"

    - name: "Wind App Angle"
      unique_id: "angleApparent"
      state_topic: "vessels/self/environment/wind/angleApparent"
      unit_of_measurement: "deg"
      value_template: "{{ (value_json * 180 / 3.14159265359) | round(1) }}"</code></pre>
</div>
</div>
</li>
<li>
<p>Edit Dashboard, Click "Add Card" and you can select to draw gauges, meters, chart, etc views for your sensors</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_solarthing_solar_power_monitoring">1.46. SolarThing (Solar Power Monitoring)</h3>
<div class="paragraph">
<p>Yor system includes installed SolarThing. See more at <a href="https://github.com/wildmountainfarms/solarthing" class="bare">https://github.com/wildmountainfarms/solarthing</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_maiana_ais">1.47. Maiana AIS</h3>
<div class="paragraph">
<p>Maiana AIS supported via add-ons</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cd /home/user/add-ons
./maiana-ais-install.sh</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_victron">1.48. Victron</h3>
<div class="paragraph">
<p>To monitor your Victron devices you can access</p>
</div>
<div class="paragraph">
<p><a href="http://localhost:8000/app?host=venus.local&amp;port=9001" class="bare">http://localhost:8000/app?host=venus.local&amp;port=9001</a></p>
</div>
<div class="paragraph">
<p>Change the host and port in that URL to your Victron Venus OS device name and port.</p>
</div>
</div>
<div class="sect2">
<h3 id="_marine_species_identification">1.49. Marine Species Identification</h3>
<div class="paragraph">
<p>When Internet is available you can use Menu link in App Menus&#8594;Utilities&#8594;Marine Life</p>
</div>
</div>
<div class="sect2">
<h3 id="_knots">1.50. Knots</h3>
<div class="paragraph">
<p>There is an application to display basic knots. App Menus&#8594;Utilities&#8594;Knots</p>
</div>
</div>
<div class="sect2">
<h3 id="_colreg_regulations">1.51. ColReg Regulations</h3>
<div class="paragraph">
<p>English version of ColReg is available under: App Menus&#8594;Utilities&#8594;ColReg</p>
</div>
</div>
<div class="sect2">
<h3 id="_sailing_education_and_certifications">1.52. Sailing Education and Certifications</h3>
<div class="paragraph">
<p>Sailing education links available under: App Menus&#8594;Internet&#8594;Nauticed Sailing Training</p>
</div>
</div>
<div class="sect2">
<h3 id="_find_a_crew">1.53. Find a Crew</h3>
<div class="paragraph">
<p>'Find a Crew' link available under: App Menus&#8594;Internet&#8594;Find a Crew</p>
</div>
</div>
<div class="sect2">
<h3 id="_suggestions">1.54. Suggestions</h3>
<div class="paragraph">
<p>The beauty of Linux is that you can customize it for your needs in infinite ways.
While this distro aimed to strike common need, you will find that number of post-install
customization steps would be required. The key is to script those steps, make them non-interactive,
make the steps requite NO GUI. In that case your set-up becomes REPRODUCIBLE in case of new
OS image releases. You can share your post-install scripts, so the system can be improved and even more fine-tuned.</p>
</div>
<div class="paragraph">
<p>While the system supports touchscreens during set-up phase you would still want to have a regular wired keyboard
and mouse attached to it as there is plenty of activities involved on the shell command line.</p>
</div>
<div class="paragraph">
<p>You do not have to be a software engineer to install the system. A mechanic, electrician, paralegal professional,
civil engineer, money manager are few examples of people with different backgrounds who were able to
install and set it up for their boats.</p>
</div>
</div>
<div class="sect2">
<h3 id="_hardware">1.55. Hardware</h3>
<div class="paragraph">
<p>This is not my first build of the boat computer with raspberry pi. A lot of ideas can be taken from my
older (2020 build which was based on OpenPlotter). For up-to-date build I would change few things:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Instead of expensive Argonaut M7 I would have used TouchThink TPC-CD-M101, Cost under $300:
<a href="https://www.touchtecs.com/" class="bare">https://www.touchtecs.com/</a></p>
</li>
<li>
<p>My waterproofing technique would be cheaper and better. Instead of costly connectors at the back of the computer (even if it is below deck)
I would use waterproof glands for exits from the enclosure and pigtail connectors. I would cover the point of connection with heat shrink tubing.</p>
</li>
<li>
<p>I would have used some kind of safe power-off solution and SSD instead of just SD card. SSD gives HUGE performance gain.</p>
</li>
<li>
<p>I would use this OS image (instead of OpenPlotter image)</p>
</li>
<li>
<p>dAISy AIS is better solution than SDR</p>
</li>
<li>
<p>Use USB 2.0 hub where USB 3.0 not required</p>
</li>
<li>
<p>SD card should be easily replaceable for boot. There shouldn&#8217;t be many screws to get access to it.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For older hardware solutions (lot of it is still valid) see:</p>
</div>
<div class="paragraph">
<p><a href="https://bareboat-necessities.github.io/my-bareboat/" class="bare">https://bareboat-necessities.github.io/my-bareboat/</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_printing">1.56. Printing</h3>
<div class="paragraph">
<p>Printing from Chromium is a bit inconvenient. You need to choose 'Print' menu, then
scroll down and choose 'More Settings' and select 'Print Using System Dialog' which
will let you choose a printer.</p>
</div>
</div>
<div class="sect2">
<h3 id="_social_networks_and_messaging">1.57. Social Networks and Messaging</h3>
<div class="paragraph">
<p>BBN OS has several programs to help you stay connected with friends
via social networks and messaging applications via Internet.</p>
</div>
</div>
<div class="sect2">
<h3 id="_location_reporting">1.58. Location Reporting</h3>
<div class="paragraph">
<p>SignalK comes with preinstalled plugin for saillogger.com</p>
</div>
</div>
<div class="sect2">
<h3 id="_most_useful_features_for_average_short_cruises">1.59. Most useful features for average short cruises</h3>
<div class="ulist">
<ul>
<li>
<p>GPS, OpenCPN off-line charts for your sailing area</p>
</li>
<li>
<p>IMU Compass</p>
</li>
<li>
<p>Tides / Currents in OpenCPN</p>
</li>
<li>
<p>Waypoints, routes in OpenCPN, tracking</p>
</li>
<li>
<p>AIS in OpenCPN</p>
</li>
<li>
<p>Weather Windy, etc. (if using LTE internet)</p>
</li>
<li>
<p>Music players</p>
</li>
<li>
<p>Dashboards Wind, Speed, Depth, GPS, Local Sunset, etc</p>
</li>
<li>
<p>Barograph</p>
</li>
<li>
<p>Autopilot (if equipped)</p>
</li>
<li>
<p>Cameras for docking and night light</p>
</li>
<li>
<p>Local boat Wi-Fi hotspot and LTE gateway</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_iot">1.60. IoT</h3>
<div class="sect3">
<h4 id="_mosquitto_mqtt_server">1.60.1. Mosquitto MQTT Server</h4>
<div class="paragraph">
<p>BBN OS image comes with Mosquitto clients and server preinstalled but disabled. To enable and start it:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Enable and start Mosquitto server (on default port 1883)</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sudo systemctl enable mosquitto
sudo systemctl start mosquitto</code></pre>
</div>
</div>
</li>
<li>
<p>Subscribe to topics</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">mosquitto_sub -t '#'</code></pre>
</div>
</div>
</li>
<li>
<p>Publish from SignalK: Enable MQTT Gateway plugin. Pick 'Send data to remote server' with URL mqtt://localhost.
Add topic (Ex: navigation.headingMagnetic). Restart SignalK and observe the data stream in the subscriber.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_nodered">1.60.2. NodeRed</h4>
<div class="paragraph">
<p>NodeRed is installed into SignalK. To use NodeRed login into SignalK by visiting
<a href="http://localhost:3000" class="bare">http://localhost:3000</a> clicking 'login', choosing 'remember me' session and storing the password in a browser.</p>
</div>
<div class="paragraph">
<p>More:
<a href="https://github.com/SignalK/node-red-embedded" class="bare">https://github.com/SignalK/node-red-embedded</a></p>
</div>
<div class="paragraph">
<p>Example flows:
<a href="https://flows.nodered.org/node/@signalk/node-red-embedded" class="bare">https://flows.nodered.org/node/@signalk/node-red-embedded</a></p>
</div>
<div class="paragraph">
<p>SenseHat into SignalK: <a href="https://forum.openmarine.net/showthread.php?tid=3899&amp;pid=21758#pid21758" class="bare">https://forum.openmarine.net/showthread.php?tid=3899&amp;pid=21758#pid21758</a></p>
</div>
<div class="paragraph">
<p>Solar Controller: <a href="https://forum.openmarine.net/showthread.php?tid=3397" class="bare">https://forum.openmarine.net/showthread.php?tid=3397</a></p>
</div>
<div class="paragraph">
<p>You can search for ready flows and additional nodes on <a href="https://flows.nodered.org/" class="bare">https://flows.nodered.org/</a></p>
</div>
<div class="paragraph">
<p>To install additional nodes using npm, make sure you run npm under 'signalk' user and
from /home/signalk/.signalk directory.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_data_analytics">1.61. Data Analytics</h3>
<div class="sect3">
<h4 id="_grafana">1.61.1. Grafana</h4>
<div class="paragraph">
<p>BBN OS image comes with grafana preinstalled but disabled. To enable and start it:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Edit the /etc/grafana/grafana.ini  and /usr/share/grafana/conf/defaults.ini files and
change line ';http_port = 3000' to 'http_port = 3080' (to avoid conflict with SignalK)</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sudo nano /etc/grafana/grafana.ini
sudo nano /usr/share/grafana/conf/defaults.ini</code></pre>
</div>
</div>
</li>
<li>
<p>Enable and start Grafana server</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sudo systemctl enable grafana-server
sudo systemctl start grafana-server</code></pre>
</div>
</div>
</li>
<li>
<p>Access <a href="http://localhost:3080" class="bare">http://localhost:3080</a>  with user and password 'admin'.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_influxdb">1.61.2. InfluxDB</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Enable and start InfluxDB server (on default ports 8086 (client-server), 8088 (RPC))</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sudo systemctl unmask influxdb.service
sudo systemctl enable influxdb
sudo systemctl start influxdb</code></pre>
</div>
</div>
</li>
<li>
<p>Initialize database and connect to it (for example) from SignalK barograph plugin.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Chronograf and Kapasitor also come pre-installed.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_power_consumption">1.62. Power consumption</h3>
<div class="paragraph">
<p>With Raspberry Pi4 power consumption of your system should be around under 4.5 watts without a monitor.
A monitor depending on it&#8217;s size and backlight brightness (needed for sunlight readability) can add
another 5 watts or even more. Human brain runs on about 12-25 watts for comparison.</p>
</div>
</div>
<div class="sect2">
<h3 id="_upgrading_your_system">1.63. Upgrading your System</h3>
<div class="sect3">
<h4 id="_verified_updates">1.63.1. Verified Updates</h4>
<div class="paragraph">
<p>Fixes verified by the development team can be installed by running:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cd /home/user/add-ons
./hot-fixes-install.sh</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_all_other_updates">1.63.2. All Other Updates</h4>
<div class="paragraph">
<p>Your system packages can be upgraded following standard Debian packaging system procedure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sudo apt update
sudo apt upgrade</code></pre>
</div>
</div>
<div class="paragraph">
<p>SignalK server and modules can be upgraded using command line:
Example for signalk-hwt901b-imu:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cd /home/signalk/.signalk
sudo su signalk -c "rm ../.signalk/pnpm-lock.yaml; pnpm config set auto-install-peers true"

sudo su signalk -c "pnpm install signalk-hwt901b-imu --unsafe-perm --save-peer"</code></pre>
</div>
</div>
<div class="paragraph">
<p>OpenCPN charts can be updated using OpenCPN chart downloader plugin.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
As result of software upgrades you might end up with a configuration which wasn&#8217;t previously tested.
Though you might be able to get some support via community forums at:
<a href="https://github.com/bareboat-necessities/lysmarine_gen/discussions" class="bare">https://github.com/bareboat-necessities/lysmarine_gen/discussions</a>
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Any attempts to upgrade underlying OS (Buster) to Bullseye will lead to a broken system.
Until Bullseye based version is available you can&#8217;t have this system running on bullseye.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_data_flow">1.64. Data Flow</h3>
<div class="imageblock">
<div class="content">
<img src="images/bbn-os-data-flow.svg" alt="Data Flow" width="100%">
</div>
<div class="title">Figure 2. Data Flow</div>
</div>
<div class="paragraph">
<p>&#8203;<br>
&#8203;<br></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_supported_hardware">2. Supported Hardware</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_monitors">2.1. Monitors</h3>
<div class="paragraph">
<p>For a cabin monitor many people do not use special marine grade ones.
If you have enough space on your nav station desk for a keyboard and a mouse,
you might consider getting a screen without touch functionality.</p>
</div>
<div class="paragraph">
<p>For a cockpit display you need &gt;1000 nit brightness for sunlight readability,
waterproof (IP67 or more), touchscreen, with accessible backlight (brightness) control buttons for
night sailing. You would need long HDMI and USB (for touch) cables to
connect to raspberry pi below deck. There are even fiber optic solutions for that. They
allow thinner cables (at additional cost).
Bonus, if your touchscreen display comes
with built-in speakers for alarms. Check Sihovision product line, if one of
their products will suit you. Some examples:</p>
</div>
<div class="paragraph">
<p>SL7W     7"    <a href="https://www.alibaba.com/product-detail/sunlight-readable-7-inch-touchscreen-waterproof_60543830769.html" class="bare">https://www.alibaba.com/product-detail/sunlight-readable-7-inch-touchscreen-waterproof_60543830769.html</a></p>
</div>
<div class="paragraph">
<p>SL10W   10"   <a href="https://www.alibaba.com/product-detail/Outdoor-display-9-7-inch-IPS_1600251157854.html" class="bare">https://www.alibaba.com/product-detail/Outdoor-display-9-7-inch-IPS_1600251157854.html</a></p>
</div>
<div class="paragraph">
<p>SL12W   12"   <a href="https://www.alibaba.com/product-detail/daylight-viewable-monitor-ip67-touch-marine_60718449450.html" class="bare">https://www.alibaba.com/product-detail/daylight-viewable-monitor-ip67-touch-marine_60718449450.html</a></p>
</div>
<div class="paragraph">
<p>SL113    13"   <a href="https://www.alibaba.com/product-detail/Marine-displays-IP67-waterproof-13-3_62066633231.html" class="bare">https://www.alibaba.com/product-detail/Marine-displays-IP67-waterproof-13-3_62066633231.html</a></p>
</div>
<div class="paragraph">
<p>SL100W   10"   <a href="https://www.sihovision.com/full-ip65-high-brightness-touch-monitor/waterproof-monitor-sl100w.html" class="bare">https://www.sihovision.com/full-ip65-high-brightness-touch-monitor/waterproof-monitor-sl100w.html</a></p>
</div>
<div class="paragraph">
<p>More ideas from TouchThink: <a href="https://www.touchtecs.com/marine-monitor/ip65-sunlight-readable-marine-display-15-inch.html" class="bare">https://www.touchtecs.com/marine-monitor/ip65-sunlight-readable-marine-display-15-inch.html</a></p>
</div>
<div class="paragraph">
<p>Pick HDMI screen over DSI as they do not take extra GPIO pins which you might have other plans for.
Most touchscreens nowadays will be capacitive multitouch due to better durability and clearness.</p>
</div>
<div class="sect3">
<h4 id="_connecting_monitors">2.1.1. Connecting monitors</h4>
<div class="paragraph">
<p>Instead of laying long USB and HDMI cables from a cockpit to the boat computer below deck, you
could use HDMI USB over Cat6 Ethernet extender. Given the high cost of longer USB and HDMI cables,
this solution can be even cheaper overall. Plus instead of two thick cables, you would need to lay
only one and thinner Cat6 Ethernet cable. However, double check with the vendor that the extender
supports touchscreen functionality over USB.</p>
</div>
<div class="paragraph">
<p>This might also work for setting dual (mirrored) monitors.</p>
</div>
</div>
<div class="sect3">
<h4 id="_brightness">2.1.2. Brightness</h4>
<div class="paragraph">
<p>LED is LCD with LED backlight.
IPS (In-plane-switching) is a type of LED with better picture quality and more power consumption
than TFT (thin-film-transistor) LCD.
OLED doesn&#8217;t have backlight.</p>
</div>
<div class="paragraph">
<p>Sunlight readability is &gt;= 1000 nits.</p>
</div>
<div class="paragraph">
<p>Software brightness control is possible on monitors which support DDC/CI (Display Data Channel) with raspberry pi
via ddcutil program. It works as an i2c channel over HDMI.</p>
</div>
<div class="paragraph">
<p>Software brightness control is also possible with monitors which create entry in /sys/class/backlight/&lt;entry&gt;
on raspberry pi. xbacklight utility can be used to control backlight brightness in such cases.</p>
</div>
<div class="paragraph">
<p>Choose monitors with less than 1 watt usage per one diagonal inch.</p>
</div>
</div>
<div class="sect3">
<h4 id="_round_touchscreens_for_gauges">2.1.3. Round touchscreens for gauges</h4>
<div class="paragraph">
<p>Pimoroni HyperPixel 2.1 Round</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_rpi4_case">2.2. Rpi4 Case</h3>
<div class="paragraph">
<p>DeskPi Pro v2 is a nice enclosure for your below deck Raspberry Pi4 with fast SSD interface and
12v input.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/DeskPi-Team/deskpi" class="bare">https://github.com/DeskPi-Team/deskpi</a></p>
</div>
<div class="paragraph">
<p>Advantech Uno 220 for Raspberry Pi4 looks good, however doesn&#8217;t come with SSD support.</p>
</div>
</div>
<div class="sect2">
<h3 id="_cm4_based_solutions">2.3. CM4 Based Solutions</h3>
<div class="paragraph">
<p>One of the promising CM4 boards and computers is Waveshare Industrial IoT Mini-Computer
Based on Raspberry Pi Compute Module 4:</p>
</div>
<div class="paragraph">
<p><a href="https://www.waveshare.com/product/raspberry-pi/boards-kits/compute-module-4-cat/cm4-io-poe-4g-box.htm" class="bare">https://www.waveshare.com/product/raspberry-pi/boards-kits/compute-module-4-cat/cm4-io-poe-4g-box.htm</a></p>
</div>
<div class="paragraph">
<p>Looks like can be a much better base for a boat computer than just regular Raspberry Pi4.</p>
</div>
<div class="paragraph">
<p>It comes with (and more):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>12v power input (7v-36v)</p>
</li>
<li>
<p>PCIe slot</p>
</li>
<li>
<p>External antennas connectable to CM4 Wi-Fi antenna port, and to GPS or LTE antenna port on LTE modem</p>
</li>
<li>
<p>CanBus (for NMEA 2000)</p>
</li>
<li>
<p>RS-485 (for NMEA 0183)</p>
</li>
<li>
<p>GPIO exposed via header with screws</p>
</li>
<li>
<p>ADC interface</p>
</li>
<li>
<p>I2C interface</p>
</li>
<li>
<p>RTC clock with a place for a battery</p>
</li>
<li>
<p>SIM card slot on a panel</p>
</li>
<li>
<p>Full size double HDMI ports and two DSI ports</p>
</li>
<li>
<p>Screw mountable case</p>
</li>
<li>
<p>Dual camera inputs (CSI)</p>
</li>
<li>
<p>USB ports</p>
</li>
<li>
<p>USB TO UART, for serial debugging</p>
</li>
<li>
<p>One Gigabit Ethernet port with PoE enabled</p>
</li>
<li>
<p>More status lights</p>
</li>
<li>
<p>Panel SD card slot (for CM4 without eMMC)</p>
</li>
<li>
<p>RS-232 port</p>
</li>
<li>
<p>Slot for LTE Modem</p>
</li>
<li>
<p>Programming Slot</p>
</li>
<li>
<p>Buzzer</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Or Waveshare Mini-Computer Based on Raspberry Pi Compute Module 4, Mini IO Board Version B</p>
</div>
<div class="paragraph">
<p><a href="https://www.waveshare.com/product/raspberry-pi/boards-kits/compute-module-4-cat/cm4-io-base-box-b.htm" class="bare">https://www.waveshare.com/product/raspberry-pi/boards-kits/compute-module-4-cat/cm4-io-base-box-b.htm</a></p>
</div>
<div class="paragraph">
<p>with a space for SSD.</p>
</div>
<div class="paragraph">
<p>To enable RTC clock if your Waveshare board has it you need to add into /boot/config.txt something like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code># Enable RTC
dtparam=i2c_vc=on
dtoverlay=i2c-rtc,pcf85063a,i2c_csi_dsi</code></pre>
</div>
</div>
<div class="paragraph">
<p>Another option is the board and a case from McuZone. The advantage of it is that it has no moving
parts (just a cooling radiator).</p>
</div>
<div class="paragraph">
<p>For McuZone board you will need to add:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>dtoverlay=dwc2,dr_mode=host</code></pre>
</div>
</div>
<div class="paragraph">
<p>into /boot/config.txt before first boot to enable USB ports.</p>
</div>
<div class="paragraph">
<p>List of the boards: <a href="https://pipci.jeffgeerling.com/boards_cm.html" class="bare">https://pipci.jeffgeerling.com/boards_cm.html</a></p>
</div>
<div class="paragraph">
<p>Several of these products could be interesting for boating applications:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Waveshare Mini IO Board Computer (ver B):  <a href="https://www.waveshare.com/product/cm4-io-base-box-b.htm" class="bare">https://www.waveshare.com/product/cm4-io-base-box-b.htm</a></p>
</li>
<li>
<p>Waveshare IoT CM4 Computer <a href="https://www.waveshare.com/product/raspberry-pi/boards-kits/compute-module-4-cat/cm4-io-poe-4g-box.htm" class="bare">https://www.waveshare.com/product/raspberry-pi/boards-kits/compute-module-4-cat/cm4-io-poe-4g-box.htm</a></p>
</li>
<li>
<p>MCUzone Carrier Grade CM4 Computers (fanless)  <a href="https://www.aliexpress.com/item/1005001972265702.html" class="bare">https://www.aliexpress.com/item/1005001972265702.html</a></p>
</li>
<li>
<p>EDATEC CM4 Industrial Computer <a href="https://www.edatec.cn/en/Product/Camera_Modules/2019/0826/76.html" class="bare">https://www.edatec.cn/en/Product/Camera_Modules/2019/0826/76.html</a></p>
</li>
<li>
<p>PiGear Nano <a href="https://www.uugear.com/product/pigear-nano/" class="bare">https://www.uugear.com/product/pigear-nano/</a></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Check internal SSD drive size (2242, 2260 usually are ok, 2280 is usually too long) and compatibility
with your CM4 board before purchasing. If m.2 slot on your board is NVME you need NVME SSD (SATA will not work).
Some boards m.2 slot designed to work only with 4G/LTE modems with PCIE M.2 KEY-M interface (will not work with SSDs).
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you use a Waveshare board, and your CM4 module comes with eMMC then you can&#8217;t boot your from SD card, and you have
to burn eMMC. To burn eMMC on Windows you have to install latest rpiboot_setup.exe from usbboot project on GitHub.
You would need to switch jumpers (switches) on your board to use OTG USB slave cable to be able to burn eMMC.
It&#8217;s a slow process as it is done via USB 2.0 interface.
Moreover, stock Raspberry Pi OS image wouldn&#8217;t have Waveshare USB ports enabled. So before burning an image into eMMC
you would need to modify it and add
 dtoverlay=dwc2,dr_mode=host
line into /boot/config.txt on the image. For that (and other) reasons, BBN OS has a separate image
for Waveshare board support. The image is based on the base BBN OS image with additional tweaks to support the Waveshare
board.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_home_assistant_yellow">2.3.1. Home Assistant Yellow</h4>
<div class="paragraph">
<p>Home Assistant Yellow includes also ZigBee interface for IoT.</p>
</div>
<div class="paragraph">
<p><a href="https://www.crowdsupply.com/nabu-casa/home-assistant-yellow" class="bare">https://www.crowdsupply.com/nabu-casa/home-assistant-yellow</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_imu_compass_accelerometer_gyroscope">2.4. IMU, compass, accelerometer, gyroscope</h3>
<div class="paragraph">
<p>PyPilot supports these via RTIMULib2. Here is a list of supported units by RTIMULib2:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>InvenSense MPU-9150</p>
</li>
<li>
<p>InvenSense MPU-9250</p>
</li>
<li>
<p>InvenSense MPU-9255</p>
</li>
<li>
<p>STM LSM6DS33/LIS3MDL</p>
</li>
<li>
<p>STM L3GD20H/LSM303D</p>
</li>
<li>
<p>STM L3GD20/LSM303DLHC</p>
</li>
<li>
<p>STM LSM9DS0</p>
</li>
<li>
<p>STM LSM9DS1</p>
</li>
<li>
<p>STM LSM6DSL</p>
</li>
<li>
<p>InvenSense ICM-20948</p>
</li>
<li>
<p>Honeywell HMC5883L with ADXL345 and L3G4200D</p>
</li>
<li>
<p>STM ISM330DHCX</p>
</li>
<li>
<p>Bosch BMX055 (experimental magnetometer support)</p>
</li>
<li>
<p>Bosch BNO055 (doesn&#8217;t work reliably on Pi, clock issues)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>PyPilot Documentation recommends using 9 Dof (9 Degrees of freedom) IMU with icm20948.</p>
</div>
<div class="paragraph">
<p>Even without autopilot motor controller these sensors allow displaying roll, pitch, and yaw.</p>
</div>
<div class="paragraph">
<p>SignalK plugin for electronic compass WitMotion:
<a href="https://github.com/W-Geronius/signalk-hwt901b-imu" class="bare">https://github.com/W-Geronius/signalk-hwt901b-imu</a></p>
</div>
<div class="paragraph">
<p>See also: <a href="https://open-boat-projects.org/en/magne" class="bare">https://open-boat-projects.org/en/magne</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_environmental_sensors">2.5. Environmental Sensors</h3>
<div class="sect3">
<h4 id="_barometer_temperature_humidity_i2c_sensors">2.5.1. Barometer, Temperature, Humidity I2C Sensors</h4>
<div class="paragraph">
<p>These are handled by Signal-K plugins. Supported ones are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bosch BME280</p>
</li>
<li>
<p>Bosch BME680</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There is also barograph plugin in SignalK.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ais_2">2.6. AIS</h3>
<div class="paragraph">
<p>There are several options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If you have AIS transducer you just use it via NMEA bus.</p>
</li>
<li>
<p>AIS built in into NMEA multiplexer used via NMEA network</p>
</li>
<li>
<p>dAISy USB AIS or Raspberry Pi dAISy AIS Hat. USB one is easier to set up.</p>
</li>
<li>
<p>Decode AIS radio signals using SDR. Probably the worst option as SDR is quite
energy consuming for that task to be run constantly.</p>
</li>
<li>
<p>Open Source (receiver/transducer): <a href="https://github.com/peterantypas/maiana" class="bare">https://github.com/peterantypas/maiana</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_radars">2.7. Radars</h3>
<div class="paragraph">
<p>OpenCPN Radar plugin reports support of the following radars:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Navico/B&amp;G/Lowrance/Simrad: BR24, 3G, 4G, and HALO20, 20+, 24, 4, 6, and 8</p>
</li>
<li>
<p>Garmin: HD and xHD</p>
</li>
<li>
<p>Raymarine: Ethernet-Analog: RD218, RD418 / Ethernet-Digital: RD418D, RD424D</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Quantum/Quantum2 Radars from Raymarine seems are not supported by OpenCPN,
nor are the Garmin Fantom radars, or Furuno units.</p>
</div>
<div class="paragraph">
<p>We didn&#8217;t have hardware to all these, so reports of successful installations
and encountered issues are welcome.</p>
</div>
</div>
<div class="sect2">
<h3 id="_usb_hubs">2.8. USB Hubs</h3>
<div class="paragraph">
<p>Choose powered USB hub which doesn&#8217;t backfeed power into pi4, to avoid issue of pi4 not being able to reboot
when USB hub is still 'on'.</p>
</div>
<div class="paragraph">
<p>If you do not plan to connect to your USB hub storage devices, cameras, network cards (high speed devices),
then USB 2.0 hub will do the job. No need for USB 3.0 hub.</p>
</div>
<div class="paragraph">
<p>USB ports follow color convention:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Color</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">USB 1.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="white black-background"><strong>White</strong></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">USB 2.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="black"><strong>Black</strong></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">USB 3.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="blue"><strong>Blue</strong></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">USB 3.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="teal"><strong>Teal</strong></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="3"><p class="tableblock">Charge &amp; Sleep or High Current</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="yellow"><strong>Yellow</strong></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="maroon"><strong>Red</strong></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="red"><strong>Orange</strong></span></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The hub we like: <a href="https://www.amazon.com/dp/B07BBLL3MJ/" class="bare">https://www.amazon.com/dp/B07BBLL3MJ/</a>
Aiibe 6 Ports Super High Speed USB 3.0 Hub Splitter</p>
</div>
</div>
<div class="sect2">
<h3 id="_ltewi_fi_routers">2.9. LTE/Wi-Fi Routers</h3>
<div class="paragraph">
<p>The Wi-Fi router you need is somewhat different from your home router. Your home router connects
wired to Internet WAN, and it gives you local Wi-Fi. On a boat the situation reverses. Your WAN is
the marina&#8217;s Wi-Fi and your Pi should (preferably) be wired into the router. These
Wi-Fi routers are being sold as Travel Wi-Fi routers.
Not all cheap Wi-Fi routers will give you the ability to connect to the marina Wi-Fi and share it on a boat.
It&#8217;s better to choose the ones running OpenWrt operating system, which is Unix based and open-source.
LTE is a very valuable feature.</p>
</div>
<div class="paragraph">
<p>Few recommended would be: GL.iNet (GL-X750 V2) Spitz router, Teltonika RUTX12 (dual SIM).</p>
</div>
<div class="paragraph">
<p>Others to consider: InHand Networks IR300 Compact Industrial Router, YeaComm Industrial or YeaComm Outdoor
LTE Routers.</p>
</div>
</div>
<div class="sect2">
<h3 id="_sd_cards">2.10. SD Cards</h3>
<div class="paragraph">
<p>In SD card you will be looking at speed (i/o reads, i/o writes), durability, size.
&gt;32Gb is recommended.</p>
</div>
</div>
<div class="sect2">
<h3 id="_seatalk1">2.11. SeaTalk1</h3>
<div class="paragraph">
<p>SeaTalk1 is Raymarine proprietary protocol. Many popular Autohelm Raymarine autopilots use it.
SeaTalk1 unlike NMEA 0183 is a bus allowing multiple talkers and multiple listeners of the same bus.
To integrate it into your system you have a number of choices:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use bidirectional NMEA 0183 multiplexer which supports one SeaTalk1 port. First
vendors to check are YakBitz and Quark-elec Marine. There are others as well. You want
bidirectional multiplexer to be able to control autopilot from your pi via NMEA.
There is a dedicated Autohelm autopilot plugin in SignalK.</p>
</li>
<li>
<p>Buy a dedicated Seatalk1 to NMEA converter.</p>
</li>
<li>
<p>For read/only Seatalk1 connection you can use this solution:
<a href="https://github.com/SignalK/signalk-server/blob/master/Seatalk(GPIO).md" class="bare">https://github.com/SignalK/signalk-server/blob/master/Seatalk(GPIO).md</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>SeaTalk1 had been reverse engineered and a converter into NMEA is available at:
<a href="https://github.com/MatsA/seatalk1-to-NMEA0183" class="bare">https://github.com/MatsA/seatalk1-to-NMEA0183</a></p>
</div>
<div class="paragraph">
<p><a href="https://github.com/Thomas-GeDaD/Seatalk1-Raspi-reader" class="bare">https://github.com/Thomas-GeDaD/Seatalk1-Raspi-reader</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_bg_fastnet">2.12. B&amp;G Fastnet</h3>
<div class="paragraph">
<p><a href="https://github.com/trlafleur/Fastnet" class="bare">https://github.com/trlafleur/Fastnet</a></p>
</div>
<div class="paragraph">
<p><a href="https://www.oppedijk.com/bandg.html" class="bare">https://www.oppedijk.com/bandg.html</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_nmea_0183_2">2.13. NMEA 0183</h3>
<div class="paragraph">
<p>Widely supported. Many options to connect to pi.</p>
</div>
<div class="paragraph">
<p>USB/Serial:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>with FTDI FT232 chipset <a href="https://www.amazon.com/dp/B07B416CPK" class="bare">https://www.amazon.com/dp/B07B416CPK</a></p>
</li>
<li>
<p>with CP210x chipset RS422 to USB converter</p>
</li>
<li>
<p>with CH340 chipset RS422 to USB converter</p>
</li>
<li>
<p>with Prolific PL2303 chipset RS422 to USB converter</p>
</li>
<li>
<p>NMEA 0183 Multiplexers working over USB (YakBitz, Quark-elec, etc)</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
FTDI is preferable choice between FTDI, CP210x, CH340, or PL2303.
FTDI seems always have unique serial ID which might be missing on others, and
it will make harder to write udev rules to uniquely name the device on USB bus.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Board:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>PiCAN-M Raspberry Pi Hat by <a href="https://www.skpang.co.uk" class="bare">https://www.skpang.co.uk</a></p>
</li>
<li>
<p>Sailor Hat for Raspberry Pi by <a href="https://hatlabs.fi" class="bare">https://hatlabs.fi</a></p>
</li>
<li>
<p>GeDaD MCS, Marine Control Server Board by <a href="https://www.gedad.de/" class="bare">https://www.gedad.de/</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>TCP/IP:</p>
</div>
<div class="paragraph">
<p>NMEA 0183 Multiplexers working over Wi-Fi or Ethernet</p>
</div>
<div class="paragraph">
<p>Vendors:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>YakBitz <a href="http://www.yakbitz.com/" class="bare">http://www.yakbitz.com/</a></p>
</li>
<li>
<p>Quark-elec <a href="https://www.quark-elec.com/" class="bare">https://www.quark-elec.com/</a></p>
</li>
<li>
<p>OceNav <a href="https://ocenav.com/" class="bare">https://ocenav.com/</a></p>
</li>
<li>
<p>ShipModul <a href="http://www.shipmodul.com/" class="bare">http://www.shipmodul.com/</a></p>
</li>
<li>
<p>Yacht Devices <a href="https://www.yachtd.com/" class="bare">https://www.yachtd.com/</a></p>
</li>
<li>
<p>DigitalYacht <a href="https://digitalyachtamerica.com/" class="bare">https://digitalyachtamerica.com/</a></p>
</li>
<li>
<p>Actisense <a href="https://actisense.com/" class="bare">https://actisense.com/</a></p>
</li>
<li>
<p>NoLand Engineering <a href="https://nolandeng.com/" class="bare">https://nolandeng.com/</a></p>
</li>
<li>
<p>Veinland <a href="https://veinland.net/" class="bare">https://veinland.net/</a></p>
</li>
<li>
<p>Zinnos <a href="http://zinnos.com/" class="bare">http://zinnos.com/</a></p>
</li>
<li>
<p>Maretron <a href="https://www.maretron.com/" class="bare">https://www.maretron.com/</a></p>
</li>
<li>
<p>Encoded Solutions <a href="https://www.encodedsolutions.com/" class="bare">https://www.encodedsolutions.com/</a></p>
</li>
<li>
<p>Comar Systems <a href="https://comarsystems.com/" class="bare">https://comarsystems.com/</a></p>
</li>
<li>
<p>gadgetpool.de <a href="https://www.gadgetpool.eu/" class="bare">https://www.gadgetpool.eu/</a></p>
</li>
<li>
<p>Star Tracking <a href="https://www.star-tracking.com/" class="bare">https://www.star-tracking.com/</a></p>
</li>
<li>
<p>Vela-Navega <a href="https://vela-navega.com/" class="bare">https://vela-navega.com/</a></p>
</li>
<li>
<p>Pitufino <a href="https://www.pitufa.at/pitufino/" class="bare">https://www.pitufa.at/pitufino/</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Yacht Devices multiplexers stand out from others by also providing a web UI with a dashboard with gauges.</p>
</div>
</div>
<div class="sect2">
<h3 id="_nmea_2000_2">2.14. NMEA 2000</h3>
<div class="paragraph">
<p>NMEA 2000 protocol was reverse engineered as a part of this project: <a href="https://github.com/canboat/canboat" class="bare">https://github.com/canboat/canboat</a></p>
</div>
<div class="paragraph">
<p>Since then NMEA 2000 had been natively incorporated into SignalK as well.</p>
</div>
<div class="paragraph">
<p>Options to connect Pi to NMEA 2000 bus:</p>
</div>
<div class="paragraph">
<p>PCB boards/hats:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>PiCAN-M Raspberry Pi Hat by <a href="https://www.skpang.co.uk" class="bare">https://www.skpang.co.uk</a></p>
</li>
<li>
<p>Sailor Hat for Raspberry Pi by <a href="https://hatlabs.fi" class="bare">https://hatlabs.fi</a></p>
</li>
<li>
<p>GeDaD MCS, Marine Control Server Board by <a href="https://www.gedad.de/" class="bare">https://www.gedad.de/</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>USB/Serial:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Actisense NGT-1 NMEA 2000® to PC <a href="https://actisense.com/products/ngt-1-nmea-2000-to-pc-interface/" class="bare">https://actisense.com/products/ngt-1-nmea-2000-to-pc-interface/</a></p>
</li>
<li>
<p>CANable and CANable Pro by <a href="https://canable.io/" class="bare">https://canable.io/</a></p>
</li>
<li>
<p>iKonvert NMEA 2000-USB Converter</p>
</li>
<li>
<p>ShipModul MiniPlex-3USB-N2K</p>
</li>
<li>
<p>Yacht Devices NMEA 2000 USB Gateway YDNU-02</p>
</li>
<li>
<p>CSS Electronics <a href="https://www.csselectronics.com/pages/can-bus-hardware-products" class="bare">https://www.csselectronics.com/pages/can-bus-hardware-products</a></p>
</li>
<li>
<p>TouCAN Marine <a href="https://www.rusoku.com/products/toucan-marine" class="bare">https://www.rusoku.com/products/toucan-marine</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>TCP/IP gateways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bi-directional NMEA 2000 Multiplexer Wi-Fi (Quark-elec, etc)</p>
</li>
<li>
<p>ShipModul MiniPlex-3E-N2K</p>
</li>
<li>
<p>Yacht Devices NMEA 2000 Wi-Fi Gateway YDWG-02</p>
</li>
<li>
<p>Yacht Devices NMEA 2000 Ethernet Gateway YDEN-02</p>
</li>
<li>
<p>NavLink2 digitalyachtamerica.com</p>
</li>
<li>
<p>Pitufino <a href="https://www.pitufa.at/pitufino/" class="bare">https://www.pitufa.at/pitufino/</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Monitoring devices:
- <a href="https://simarine.net/" class="bare">https://simarine.net/</a></p>
</div>
<div class="paragraph">
<p>OpenCPN TwoCan plugin has a list of compatible with it devices as well.</p>
</div>
<div class="paragraph">
<p>Stay away from devices which just convert NMEA 2000 into NMEA 0183.
You need to feed NMEA 2000 into SignalK and be able to receive it too.</p>
</div>
</div>
<div class="sect2">
<h3 id="_nmea_onenet_poe">2.15. NMEA OneNet, PoE</h3>
<div class="paragraph">
<p>NMEA OneNet is Ethernet based with RJ-45 or X-Coded M12 8-pin (to pass smaller openings) connectors.</p>
</div>
<div class="paragraph">
<p>PoE (Power over Ethernet) allows powering devices with same data cables. It is a nice way
for reducing the number of cables in your system.</p>
</div>
</div>
<div class="sect2">
<h3 id="_sae_j1939">2.16. SAE J1939</h3>
<div class="paragraph">
<p>J1939 is a CAN-BUS protocol for monitoring automotive engines, but it&#8217;s also being used on boats.
Usually it requires J1939 to NMEA 2000 gateways.</p>
</div>
<div class="paragraph">
<p>Vendors of such gateways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Maretron</p>
</li>
<li>
<p>Yacht Devices</p>
</li>
<li>
<p>Oceanic Systems</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_gps">2.17. GPS</h3>
<div class="paragraph">
<p>Several options to connect:</p>
</div>
<div class="paragraph">
<p>USB:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Many USB "mouse" GPS should work on BBN OS after plugging-in and giving them some time
to acquire satellites outside the house. Cold start can take half an hour or so with some GPS models.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Re-use GPS built-in into LTE router:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>LTE modems on LTE routers have built-in GPS. If you followed our advice on using a router with
OpenWrt OS then you will be able to install KPlex (or gpsd) on it and set up a connection to it
from SignalK (or/and OpenCPN, AvNav) running on your raspberry pi.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>NMEA:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use GPS from your NMEA network. VHF have GPS and NMEA interfaces. Some NMEA multiplexers come with GPS built-in
as well as most chartplotters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>PCB Boards connected to Pi:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Example: BerryGPS. The disadvantage of those is that they use your Pi&#8217;s built-in UART and you might have other
devices that you want to use it instead.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_sdr_ssb">2.18. SDR, SSB</h3>
<div class="paragraph">
<p>RTL-SDR, SDRPlay SDR, HackRF SDR, LimeSDR, and likely others. Interfaces USB, Ethernet.</p>
</div>
<div class="paragraph">
<p>Yaesu, Icom are the popular vendors within HAM community.</p>
</div>
<div class="paragraph">
<p>SDRs consume quite some power, so it&#8217;s better to connect them to pi via a powered USB Hub (in case of USB interface).</p>
</div>
</div>
<div class="sect2">
<h3 id="_ssd">2.19. SSD</h3>
<div class="paragraph">
<p>Raspberry Pi OS supports NVMe and SATA SSDs with an appropriate extension board, or a Pi case, and
their vendor&#8217;s driver.</p>
</div>
<div class="paragraph">
<p>NVMe apparently doesn&#8217;t give much performance boost over SATA for pi4 with
an exception to CM4 (Pi4 Compute Module) performing better on writes with NVMe drives.
pi4 internal interface is the bottleneck for transfer rate speed.</p>
</div>
<div class="paragraph">
<p>Booting from NVMe drives got supported by linux kernel on pi4 just recently (some bugs might remain).
See <a href="https://youtu.be/4Womn10v71s" class="bare">https://youtu.be/4Womn10v71s</a> for instructions on booting from NVMe drives (while this feature is still in beta).</p>
</div>
<div class="paragraph">
<p>Perform a benchmark of your SSD after installation with correct drivers. Make sure it falls
into expected range.</p>
</div>
<div class="paragraph">
<p>SSD is also less prone to data corruption on sudden power cut-offs than SD cards.</p>
</div>
<div class="paragraph">
<p>USB stick drives (flash drives) performance is not as high as NVMe and SATA SSDs.</p>
</div>
</div>
<div class="sect2">
<h3 id="_navtex_2">2.20. NavTex</h3>
<div class="ulist">
<ul>
<li>
<p>NASA Marine PC Navtex USB with an antenna (BBN OS comes with a program called PC-NavTex for it). ~$220</p>
</li>
<li>
<p>USB Devices from wetterinfobox.com (WIB2 - NAVTEX for PC) <a href="http://www.wetterinfobox.com" class="bare">http://www.wetterinfobox.com</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There are reports that PC Windows software for WIB2/3 can be run on Raspberry Pi with Box86 and Wine:
<a href="https://www.cruisersforum.com/forums/f134/navtex-plugin-251561-3.html#post3533558" class="bare">https://www.cruisersforum.com/forums/f134/navtex-plugin-251561-3.html#post3533558</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_moitessier_hat">2.21. Moitessier HAT</h3>
<div class="paragraph">
<p>Moitessier HAT has a closed source kernel driver. Contact Moitessier HAT vendor for a driver for your kernel version
and with it the HAT will work.</p>
</div>
</div>
<div class="sect2">
<h3 id="_rtc_real_time_clock">2.22. RTC (Real Time Clock)</h3>
<div class="paragraph">
<p>Raspberry pi doesn&#8217;t have clock module to keep the time when it&#8217;s off, so you might
consider adding one.</p>
</div>
<div class="paragraph">
<p>There are a few common i2c RTC modules:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>DS3231 RTC</p>
</li>
<li>
<p>DS1307 RTC</p>
</li>
<li>
<p>PCF85063A RTC</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Make sure there are no conflicts in addresses with your other i2c devices. Other
devices usually have at least one option for switching to another address to avoid conflicts.</p>
</div>
</div>
<div class="sect2">
<h3 id="_sound_cards">2.23. Sound Cards</h3>
<div class="paragraph">
<p>As Raspberry Pi doesn&#8217;t have an audio input, for use with SSB radio you might want to have an additional
sound card which has both audio in and out. There is a good selection of options, but check reviews
and the compatibility with Raspberry Pi4.</p>
</div>
</div>
<div class="sect2">
<h3 id="_cameras_2">2.24. Cameras</h3>
<div class="sect3">
<h4 id="_ip_cameras_2">2.24.1. IP Cameras</h4>
<div class="paragraph">
<p>IP Cameras should work with MotionEye using their rtsp:// URLs.</p>
</div>
</div>
<div class="sect3">
<h4 id="_connecting_cameras_to_csi_on_raspberry_pi">2.24.2. Connecting cameras to CSI on raspberry pi</h4>
<div class="paragraph">
<p>Geekworm Raspberry Pi Hdmi-in Module, Hdmi to CSI-2 could be used to solve distance issue with CSI cameras.</p>
</div>
<div class="paragraph">
<p><a href="https://geekworm.com/products/raspberry-pi-hdmi-to-csi-2-adapter-board-with-15-pin-ffc-cable" class="bare">https://geekworm.com/products/raspberry-pi-hdmi-to-csi-2-adapter-board-with-15-pin-ffc-cable</a></p>
</div>
<div class="paragraph">
<p>Another trick with Arducam CSI to HDMI Cable extension is for CSI cameras to connect to raspberry pi over
longer HDMI. You can&#8217;t use HDMI camera, HDMI is used merely as wire signal extension for CSI.</p>
</div>
<div class="paragraph">
<p><a href="https://www.arducam.com/product/arducam-csi-hdmi-cable-extension-module-15pin-60mm-fpc-cable-raspberry-pi-camera-specific-pack-2-1-set/" class="bare">https://www.arducam.com/product/arducam-csi-hdmi-cable-extension-module-15pin-60mm-fpc-cable-raspberry-pi-camera-specific-pack-2-1-set/</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_low_light_vision">2.24.3. Low light vision</h4>
<div class="paragraph">
<p>Sionyx has some boating oriented solutions:
<a href="https://www.sionyx.com/pages/boating" class="bare">https://www.sionyx.com/pages/boating</a></p>
</div>
<div class="paragraph">
<p>Image stabilization for boat movements is an important factor too.</p>
</div>
<div class="sect4">
<h5 id="_night_vision_flir">Night vision FLIR</h5>
<div class="paragraph">
<p>While FLIR cameras (from the company which bought major manufacturer Raymarine) are great,
they are prohibitively expensive for most recreational boaters.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_usb_connected_cameras">2.24.4. USB connected cameras</h4>
<div class="paragraph">
<p>Supported with USB 3.0</p>
</div>
<div class="paragraph">
<p>We need your help with testing it and building some recommendations on models, etc.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_esp32_arduino">2.25. ESP32 / Arduino</h3>
<div class="paragraph">
<p>Using ESP32 controllers and a bit of micro python programming you can connect all kind
of sensors to your system. One of product lines we like is from m5stack.com,
and another is Wio Terminal by seeedstudio.com.</p>
</div>
<div class="paragraph">
<p>M5Tough: <a href="https://shop.m5stack.com/products/m5stack-tough-esp32-iot-development-board-kit" class="bare">https://shop.m5stack.com/products/m5stack-tough-esp32-iot-development-board-kit</a></p>
</div>
<div class="paragraph">
<p>Our m5stack based boat display:
<a href="https://github.com/bareboat-necessities/my-bareboat/tree/master/m5-boat-display" class="bare">https://github.com/bareboat-necessities/my-bareboat/tree/master/m5-boat-display</a></p>
</div>
<div class="paragraph">
<p>Here is a dinghy location tracker idea.
<a href="https://www.seeedstudio.com/LoRa-GPS-Tracker-with-Wio-Terminal-p-5182.html" class="bare">https://www.seeedstudio.com/LoRa-GPS-Tracker-with-Wio-Terminal-p-5182.html</a>
(Needs some work on a waterproof enclosure for a transmitter, and reporting
the dinghy location via AIS NMEA data stream to the mother ship&#8217;s chartplotter).
WIO terminal is not esp32 though.</p>
</div>
</div>
<div class="sect2">
<h3 id="_esp32_with_signalk">2.26. ESP32 with SignalK</h3>
<div class="paragraph">
<p>To program ESP32 for communicating with SignalK you can use SignalK SensESP library:
<a href="https://github.com/SignalK/SensESP" class="bare">https://github.com/SignalK/SensESP</a></p>
</div>
<div class="paragraph">
<p>SensESP allows connecting many sensors:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Engine RPM</p>
</li>
<li>
<p>Engine Temperature, Oil Pressure</p>
</li>
<li>
<p>Liquid levels (Fuel, fresh water, black water, septic tank)</p>
</li>
<li>
<p>Environment (Temperature, pressure, humidity, air quality)</p>
</li>
<li>
<p>Rudder position</p>
</li>
<li>
<p>Dangerous gases</p>
</li>
<li>
<p>Lightning strikes detectors</p>
</li>
<li>
<p>Voltage, amps</p>
</li>
<li>
<p>Relays for control (lights, devices)</p>
</li>
<li>
<p>Power utilization (batteries monitoring)</p>
</li>
<li>
<p>Motion sensors</p>
</li>
<li>
<p>Human heartbeat detection</p>
</li>
<li>
<p>Anchor windlass chain counters</p>
</li>
<li>
<p>Bilge pump</p>
</li>
<li>
<p>Proximity, distance sensors</p>
</li>
<li>
<p>LiDAR</p>
</li>
<li>
<p>Fingerprint recognition</p>
</li>
<li>
<p>Light sensors</p>
</li>
<li>
<p>Color detection</p>
</li>
<li>
<p>pH alkalinity and acidity sensor</p>
</li>
<li>
<p>433MHz RF receivers</p>
</li>
<li>
<p>LoRa receivers/transmitters</p>
</li>
<li>
<p>Interfaces (USB, Ethernet, CAN Bus, Rs-485, RS-232, Wi-Fi, 4G/LTE, GPS/GNSS, ModBus, etc)</p>
</li>
<li>
<p>IMU (gyroscope, magnetometer, accelerometer)</p>
</li>
<li>
<p>Hall effect</p>
</li>
<li>
<p>Actuators, servo, motor controls</p>
</li>
<li>
<p>Audio (speaker, microphone), buzzers</p>
</li>
<li>
<p>Barcode/QR code readers</p>
</li>
<li>
<p>External memory readers (TF card, etc)</p>
</li>
<li>
<p>Laser emitters / receivers</p>
</li>
<li>
<p>NCIR/IR receivers/transmitters</p>
</li>
<li>
<p>Thermal cameras</p>
</li>
<li>
<p>Joystick</p>
</li>
<li>
<p>DAC/ADC</p>
</li>
<li>
<p>Potentiometers</p>
</li>
<li>
<p>Blood alcohol concentration</p>
</li>
<li>
<p>Blood oxygen, oximeter</p>
</li>
<li>
<p>and more</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_bbn_esp32_projects">2.26.1. BBN Esp32 Projects</h4>
<div class="ulist">
<ul>
<li>
<p>MFD (multi-functional display) based on waterproof M5Stack Tough: <a href="https://github.com/bareboat-necessities/bbn-m5stack-tough" class="bare">https://github.com/bareboat-necessities/bbn-m5stack-tough</a></p>
</li>
<li>
<p>BBN NMEA 2000 sensors and gateways solutions: <a href="https://github.com/bareboat-necessities/bbn-nmea200-m5atom" class="bare">https://github.com/bareboat-necessities/bbn-nmea200-m5atom</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_platformio_ide">2.26.2. PlatformIO IDE</h4>
<div class="paragraph">
<p>SensESP requires using PlatformIO IDE, which you can install using these steps:</p>
</div>
<div class="paragraph">
<p>Install Visual Studio Code</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sudo apt update
sudo apt install code
code</code></pre>
</div>
</div>
<div class="paragraph">
<p>Install PlatformIO IDE by clicking 'Extensions' icon in Visual Studio Code and typing 'PlatformIO' in the search field.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_1_wire">2.27. 1-Wire</h3>
<div class="paragraph">
<p>SignalK Raspberry Pi 1wire plugin supports connecting multiple DS18B20
1-wire temperature sensors.</p>
</div>
</div>
<div class="sect2">
<h3 id="_iot_2">2.28. IoT</h3>
<div class="paragraph">
<p>Sonoff Switches - Supported by SignalK plugin.</p>
</div>
<div class="paragraph">
<p>Ecowitt weather sensors - Supported via SignalK plugin.</p>
</div>
<div class="paragraph">
<p>Shelly <a href="https://shelly.cloud/" class="bare">https://shelly.cloud/</a> - Supported via SignalK plugin.</p>
</div>
<div class="paragraph">
<p>EmpirBus NXT <a href="https://www.empirbus.com/" class="bare">https://www.empirbus.com/</a> - Supported via SignalK plugin.</p>
</div>
<div class="paragraph">
<p>ZigBoat <a href="https://www.zigboat.com/" class="bare">https://www.zigboat.com/</a></p>
</div>
<div class="paragraph">
<p>Keep in mind that most Wi-Fi IoT devices will not work on 5GHz Wi-Fi. They usually require 2.4GHz Wi-Fi bands.</p>
</div>
</div>
<div class="sect2">
<h3 id="_power_12v_5v_converters">2.29. Power, 12v &#8594; 5v Converters</h3>
<div class="sect3">
<h4 id="_dc_voltage_converters">2.29.1. DC Voltage Converters</h4>
<div class="paragraph">
<p>This converter was used with no issues:</p>
</div>
<div class="paragraph">
<p>TOBSUN EA50-5V DC 12V 24V to DC 5V 10A 50W Converter Regulator 5V 50W Power Supply Step Down Module Transformer</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Over-voltage, over-current, over-temperature, short-circuit auto protection</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Input voltage: 12/24V, Output: 5V/10A</pre>
</div>
</div>
<div class="paragraph">
<p><a href="https://www.amazon.com/dp/B01M03288J" class="bare">https://www.amazon.com/dp/B01M03288J</a></p>
</div>
<div class="paragraph">
<p>&#8203;<br></p>
</div>
<div class="paragraph">
<p>As well as this UBEC:</p>
</div>
<div class="paragraph">
<p>US Ship Hobbywing 5V/6V 3A Switch-mode UBEC, Max 5A lowest RF</p>
</div>
<div class="paragraph">
<p><a href="https://www.amazon.com/dp/B008ZNWOYY" class="bare">https://www.amazon.com/dp/B008ZNWOYY</a></p>
</div>
<div class="paragraph">
<p>Avoid powering Pi4 via GPIO pins directly as it bypasses an overvoltage self-healing fuse
built-in into pi.</p>
</div>
</div>
<div class="sect3">
<h4 id="_power_management_victron_venus_os">2.29.2. Power Management, Victron, Venus OS</h4>
<div class="paragraph">
<p>SignalK has good support for interfacing with Victron Energy products and their Venus OS.</p>
</div>
<div class="paragraph">
<p>SignalK comes with:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Victron Venus OS Plugin</p>
</li>
<li>
<p>ModBus Client Plugin</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>NodeRed comes with nodes supporting Victron too.</p>
</div>
<div class="paragraph">
<p>HomeAssistant power monitoring has good support of Victron devices as well.
<a href="https://community.victronenergy.com/questions/63997/home-assitant-integration-with-victron.html" class="bare">https://community.victronenergy.com/questions/63997/home-assitant-integration-with-victron.html</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sonars">2.30. Sonars</h3>
<div class="sect3">
<h4 id="_echozilla_open_source_sonar">2.30.1. EchoZilla Open Source Sonar</h4>
<div class="paragraph">
<p>EchoZilla Open Source Sonar: <a href="https://echozilla.co.uk/" class="bare">https://echozilla.co.uk/</a></p>
</div>
<div class="paragraph">
<p>Source code: <a href="https://echozilla.co.uk/pages/developers" class="bare">https://echozilla.co.uk/pages/developers</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_drones_2">2.31. Drones</h3>
<div class="paragraph">
<p>List of supported drones:</p>
</div>
<div class="paragraph">
<p><a href="https://ardupilot.org/planner2/docs/common-rtf.html" class="bare">https://ardupilot.org/planner2/docs/common-rtf.html</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_ir_infrared">2.32. IR (Infrared)</h3>
<div class="paragraph">
<p>The Raspberry Pi can receive and send IR signals using its GPIO pins.</p>
</div>
<div class="paragraph">
<p>You configure which pins your IR diode is connected to in /boot/config.txt like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>dtoverlay=gpio-ir,gpio_pin=19
dtoverlay=gpio-ir-tx,gpio_pin=26</code></pre>
</div>
</div>
<div class="paragraph">
<p>LIRC (<a href="https://lirc.org/" class="bare">https://lirc.org/</a>) software is a part of BBN OS. You need to configure it for your IR remote.</p>
</div>
</div>
<div class="sect2">
<h3 id="_actuators">2.33. Actuators</h3>
<div class="paragraph">
<p>Actuators discussed in this thread: <a href="https://forum.openmarine.net/showthread.php?tid=3468" class="bare">https://forum.openmarine.net/showthread.php?tid=3468</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_open_boat_projects">2.34. Open Boat Projects</h3>
<div class="paragraph">
<p>Open Boat Projects: <a href="https://open-boat-projects.org/en/" class="bare">https://open-boat-projects.org/en/</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_antennas">2.35. Antennas</h3>
<div class="paragraph">
<p>There is a great variety of antennas of a boat. Directional vs omnidirectional,
active vs passive, internal (some are just a part of a circuit on a PCB) vs external,
grounded vs ungrounded, receiving-only vs receiving/transmitting, and a wide variety of shapes.</p>
</div>
<div class="sect3">
<h4 id="_vhf_ais">2.35.1. VHF, AIS</h4>
<div class="paragraph">
<p>VHF and AIS use similar frequencies, need be in direct line of sight, so the higher they are the better range.
They are limited by Earth curvature. The range is around 30 miles. They can use the same antenna with a proper splitter.
Transmitter device on AIS has to be licensed and registered.</p>
</div>
</div>
<div class="sect3">
<h4 id="_wi_fi_lte4g">2.35.2. Wi-Fi, LTE/4G</h4>
<div class="paragraph">
<p>Similar but distinct separate antennas. Can work even if inside cabin of a fiberglass boat. Range varies on antenna
gain. Wi-Fi usually in hundreds of feet. LTE/4G in/under few miles. LTE/4G uses cellular network of antennas
of network providers which covers most populated areas.</p>
</div>
</div>
<div class="sect3">
<h4 id="_gps_2">2.35.3. GPS</h4>
<div class="paragraph">
<p>Receive-only. Doesn&#8217;t need to be high. Needs a clear sky view of multiple satellites. External ones are usually
active and placed inside a mushroom-looking plastic.
Designed to have almost world-wide coverage (except of extreme North/South poles areas).
There are several GNSS systems with different satellite constellations.
GPS (US), BEIDOU (China), GALILEO (EU), GLONASS (Russia), and QZSS (Japan)</p>
</div>
</div>
<div class="sect3">
<h4 id="_satellite_data_iridium_starlink_etc">2.35.4. Satellite Data (Iridium, StarLink, etc)</h4>
<div class="paragraph">
<p>Both are satellite communications. Iridium designed for a hand held phone with a small antenna.
StarLink is communicating with more satellites on much lower orbits, and it is designed for a directional
pizza-sized dish antenna, automatically orienting itself using a motor.
Designed to have almost world-wide coverage (except of extreme North/South poles areas).</p>
</div>
<div class="paragraph">
<p>Satellites data providers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Iridium</p>
</li>
<li>
<p>Orbcomm</p>
</li>
<li>
<p>Inmarsat</p>
</li>
<li>
<p>Globalstar</p>
</li>
<li>
<p>StarLink</p>
</li>
<li>
<p>Swarm</p>
</li>
<li>
<p>Others as well</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Garmin Inreach provides reasonably priced
satellite data plans via Iridium.</p>
</div>
</div>
<div class="sect3">
<h4 id="_fm_frequency_modulation">2.35.5. FM (Frequency Modulation)</h4>
<div class="paragraph">
<p>Short piece of wire, small telescoping antenna. Receive only. 30-40 miles range.
Transmitted from ground stations. VHF is FM too, but FM is loosely used term for music and local news broadcast
channels.</p>
</div>
</div>
<div class="sect3">
<h4 id="_bluetooth_433mhz_fm_rf">2.35.6. Bluetooth, 433MHz FM RF</h4>
<div class="paragraph">
<p>Bluetooth antennas are small and often just a part of a PCB circuit.
Bluetooth range is really short, and it is about 10 meters.</p>
</div>
<div class="paragraph">
<p>433MHz FM RF range is about 300 meters. Often used for remote controls. Wireless masthead wind transducers, etc.</p>
</div>
</div>
<div class="sect3">
<h4 id="_zigbee_z_wave">2.35.7. Zigbee, Z Wave</h4>
<div class="paragraph">
<p>Zigbee operates on short distances 10-100m in about same spectrum range as Wi-Fi with lower
bandwidth but higher reliability. There are some products for boats such as from <a href="https://www.zigboat.com/" class="bare">https://www.zigboat.com/</a>
Zigbee is for LAN (comparing with Bluetooth being point-to-point).</p>
</div>
<div class="paragraph">
<p>Z-Wave is similar to Zigbee but uses different RF spectrum which doesn&#8217;t clash with Wi-Fi.</p>
</div>
</div>
<div class="sect3">
<h4 id="_nfc">2.35.8. NFC</h4>
<div class="paragraph">
<p>NFC (Near field communication) is for wireless communication for two devices over distance up to 4 cm.</p>
</div>
</div>
<div class="sect3">
<h4 id="_rfid">2.35.9. RFID</h4>
<div class="paragraph">
<p>Radio frequency identification. Passive and active tags to carry an identifier information which can be read
over some distance avd not necessarily withing light on sight (not like barcodes).</p>
</div>
</div>
<div class="sect3">
<h4 id="_navtex_weatherfax">2.35.10. NavTex, WeatherFax</h4>
<div class="paragraph">
<p>Receive only. Transmitted from ground stations with predefined intervals of time.
WeatherFax frequency depends on the region. You need to know a schedule of WeatherFax transmitting stations
for different areas.</p>
</div>
<div class="paragraph">
<p>NavTex frequency is 518 kHz in the medium frequency band. 490 kHz in addition in some countries.
Both NavTex and WeatherFax designed for almost world-wide coverage and offshore sailing.</p>
</div>
<div class="paragraph">
<p>PA0RDT active mini-whip antenna is good for NavTex and WeatherFax frequencies:
<a href="http://dl1dbc.net/SAQ/miniwhip.html" class="bare">http://dl1dbc.net/SAQ/miniwhip.html</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_ssb_ham">2.35.11. SSB, HAM</h4>
<div class="paragraph">
<p>Transmitting on SSB (Single Side Band) radio requires a license for an operator except of in an emergency.
Designed for long range communications at sea and for offshore vessels. An insulated backstay of a mast can
serve as SSB antenna. Propagation of SSB radio waves work on reflected or
refracted back toward Earth from the ionosphere. Performance ranges in excess of 4000 miles.
Some parts of SSB frequency spectrum work better at night, others during daytime.</p>
</div>
<div class="paragraph">
<p>HAM (aka amateur) radio also requires a license for an operator to transmit.</p>
</div>
</div>
<div class="sect3">
<h4 id="_lora">2.35.12. LoRa</h4>
<div class="paragraph">
<p>LoRa (Long Range) radio is license-free for both transmitting and receiving.
Range 2-5 km in open. Used as a low power (and low traffic bandwidth) wireless platform for Internet of Things (IoT).
LoRa antennas are small and usually attached to its devices.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_you_can_help">3. How you can help</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add a star on our GitHub project page <a href="https://github.com/bareboat-necessities/lysmarine_gen" class="bare">https://github.com/bareboat-necessities/lysmarine_gen</a></p>
</li>
<li>
<p>Report a bug (or contribute to resolving an existing issue) <a href="https://github.com/bareboat-necessities/lysmarine_gen/issues" class="bare">https://github.com/bareboat-necessities/lysmarine_gen/issues</a></p>
</li>
<li>
<p>Spread the word. There are many sailing forums on Internet and Facebook. Let other people know what BBN OS could do for you.</p>
</li>
<li>
<p>Respond to a question in our discussion forums: <a href="https://github.com/bareboat-necessities/lysmarine_gen/discussions" class="bare">https://github.com/bareboat-necessities/lysmarine_gen/discussions</a></p>
</li>
<li>
<p>Post a video on YouTube explaining how you use BBN OS on your boat</p>
</li>
<li>
<p>Submit a GitHub pull request with code changes to improve BBN OS</p>
</li>
<li>
<p>Post a blog article or contribute to HOWTOs section of this document.</p>
</li>
<li>
<p>Of course, the BBN OS is completely open-source and free to use.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_howtos">4. HOWTOs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Please send us your HowTo, and we can add it here for everyone to find. Thanks</p>
</div>
<div class="sect2">
<h3 id="_berrygps_imu_v3">4.1. BerryGPS-IMU V3</h3>
<div class="ulist">
<ul>
<li>
<p>Install the BerryGPS-IMU V3 hat</p>
</li>
<li>
<p>Follow steps to enable i2c and disable serial port <a href="https://ozzmaker.com/berrygps-setup-guide-raspberry-pi/" class="bare">https://ozzmaker.com/berrygps-setup-guide-raspberry-pi/</a></p>
</li>
<li>
<p>Remove serial console mentioned in /boot/cmdline.txt (argument with serial0 and baud rate)</p>
</li>
<li>
<p>Reboot</p>
</li>
<li>
<p>sudo i2cdetect -y 1 (should show you addresses)</p>
</li>
<li>
<p>Do not create pypilot connection to signalK as it creates a data loop (see <a href="https://bareboat-necessities.github.io/my-bareboat/bareboat-os.html#_imu" class="bare">https://bareboat-necessities.github.io/my-bareboat/bareboat-os.html#_imu</a> )</p>
</li>
<li>
<p>Set up barometer feed from SignalK ( <a href="https://bareboat-necessities.github.io/my-bareboat/bareboat-os.html#_barometer_temperature_humidity" class="bare">https://bareboat-necessities.github.io/my-bareboat/bareboat-os.html#_barometer_temperature_humidity</a> )</p>
</li>
<li>
<p>IMU data heading, etc. should come from pypilot NMEA</p>
</li>
<li>
<p>check it with telnet localhost 20220</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Brief explanation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>i2c should be enabled, serial console disabled in config.txt</p>
</li>
<li>
<p>i2c driver should be loaded at boot (that&#8217;s what raspi-config step does)</p>
</li>
<li>
<p>At this point you should have data readable from GPS (via /dev/serial0) and IMU / barometer (via i2c)</p>
</li>
<li>
<p>Now you set up routing of this data into dashboards, chartplotters</p>
</li>
<li>
<p>IMU is read by pypilot, which feeds it via 20220 tcp port using NMEA 0183 format</p>
</li>
<li>
<p>Do not create authorized READ/WRITE pypilot connection via SignalK web socket to port 3000 of signalK in signalK
using their token exchange procedure. (Causes a data loop)</p>
</li>
<li>
<p>GPS is read by signalK by creating NMEA connection to /dev/serial0 port (set correct baud rate), or add it as a device
for GPSd into /etc/default/gpsd</p>
</li>
<li>
<p>Barometric/temp data is read by SignalK using signalK BME280 plugin. Make sure setting polling interval below 30 seconds (because OpenCPN expires non-navigational data every 30 seconds)</p>
</li>
<li>
<p>Calibrate level IMU on water. Calibrate your IMU compass, using pyPilot calibration utility. Shutdown SignalK during calibration.</p>
</li>
<li>
<p>I use external GPS antenna with it. (It needs to be an active antenna). There is a jumper/or switch on the Berry board to choose external antenna</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Cellular, GPS, Wi-Fi Antenna (3 in one), Model AFCJF3, Price $80
Designed for marine and recreational vehicles (RV), this multi-band
Cellular, GPS, Wi-Fi Antenna (696 MHz - 5900 MHz / 5.9 GHz) is a 3-way omnidirectional,
IP67 waterproof antenna for harsh environment communication applications.
<a href="https://www.signalbooster.com/products/cellular-gps-wifi-antenna" class="bare">https://www.signalbooster.com/products/cellular-gps-wifi-antenna</a>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Check with commands:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo i2cdetect -y 1</pre>
</div>
</div>
<div class="paragraph">
<p>should show addresses on the bus, then</p>
</div>
<div class="literalblock">
<div class="content">
<pre>systemctl status pypilot@pypilot</pre>
</div>
</div>
<div class="paragraph">
<p>should show that pypilot service as enabled, running and has no errors.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>telnet localhost 20220</pre>
</div>
</div>
<div class="paragraph">
<p>should show stream of heading NMEA data from pypilot.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>telnet localhost 10110</pre>
</div>
</div>
<div class="paragraph">
<p>should show both GPS and heading NMEA sentences from SignalK.</p>
</div>
<div class="paragraph">
<p>Also, check this FAQ for common berryGPS issues:</p>
</div>
<div class="paragraph">
<p><a href="https://ozzmaker.com/berrygps_imu-faq/" class="bare">https://ozzmaker.com/berrygps_imu-faq/</a></p>
</div>
<div class="paragraph">
<p>disabling echo on serial port might be required, as well as enabling ZDA NMEA time sentence.</p>
</div>
<div class="paragraph">
<p>u-blox GPS receivers have extensive configuration. Check: <a href="https://gpsd.io/ubxtool-examples.html" class="bare">https://gpsd.io/ubxtool-examples.html</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_other_wi_fi_drivers">4.2. Other Wi-Fi drivers</h3>
<div class="paragraph">
<p>There is a script to install various additional Wi-Fi cards drivers</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cd /home/user/add-ons
./wifi-drivers-install.sh</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_cloud_storage">4.3. Cloud Storage</h3>
<div class="paragraph">
<p>Using rclone you can store and sync your files on many cloud vendors storage.
More: <a href="https://github.com/rclone/rclone" class="bare">https://github.com/rclone/rclone</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_backup">4.4. Backup</h3>
<div class="paragraph">
<p>There are few programs (installed) you can use for backups:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Restic <a href="https://github.com/restic/restic" class="bare">https://github.com/restic/restic</a></p>
</li>
<li>
<p>Timeshift <a href="https://github.com/teejee2008/timeshift" class="bare">https://github.com/teejee2008/timeshift</a></p>
</li>
<li>
<p>rclone <a href="https://github.com/rclone/rclone" class="bare">https://github.com/rclone/rclone</a></p>
</li>
<li>
<p>rsync <a href="https://rsync.samba.org/" class="bare">https://rsync.samba.org/</a></p>
</li>
<li>
<p>rpi-clone <a href="https://github.com/billw2/rpi-clone" class="bare">https://github.com/billw2/rpi-clone</a></p>
</li>
<li>
<p>and other scriptable solutions</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="phone_gps">4.5. Using your smartphone as NMEA GPS receiver</h3>
<div class="paragraph">
<p>Install GPS2IP application on your smartphone. Start it and enable GPS2IP in it.
Your phone should be on the same local network as your boat computer.
In SignalK add gps2ip_on_smartphone NMEA TCP connection to the IP address
shown in GPS2IP app and the port specified there (usually 11123). Your phone ip address
should be a static address. So make sure it&#8217;s mapped to a static address on your Wi-Fi networks with a MAC address
of your phone.</p>
</div>
</div>
<div class="sect2">
<h3 id="_how_to_navigate_with_your_smartphone_as_gps_receiver_and_have_an_internet_access_on_a_boat_within_cellular_reception">4.6. How to navigate with your smartphone as GPS receiver and have an Internet access on a boat within cellular reception</h3>
<div class="paragraph">
<p>If you have a smartphone on board then you can use it as a source of NMEA GPS data and Internet provider
for all your boat devices connected to your boat computer.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Follow steps <a href="#tether">Using iPhone as Internet gateway</a> (or <a href="#tether_android">Using Android phone as Internet gateway</a>) to connect to your phone and use it as an Internet hotspot.</p>
</li>
<li>
<p>Follow steps <a href="#phone_gps">Using your smartphone as NMEA GPS receiver</a> to use your phone GPS as NMEA 0183 source of GPS data.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_dual_monitor_setup">4.7. Dual monitor setup</h3>
<div class="paragraph">
<p>Raspberry Pi comes with two HDMI outputs. However, its software is still not able to handle two
heterogeneous displays properly. The hardest case is when one is a touchscreen and another is not,
and they have different screen resolutions, and a mouse attached which needs to flow
from one screen workspace to another workspace of a secondary screen.
Another challenge is at boot time. What if one screen is powered and another is not, but a user
decides to turn power on the secondary one later. Raspberry Pi OS seems unable to cover all these
scenarios (nor other linux distributions at the current state).</p>
</div>
</div>
<div class="sect2">
<h3 id="_autostart_programs_on_desktop_startup">4.8. Autostart programs on desktop startup</h3>
<div class="paragraph">
<p>You can set up which programs you want to autostart when desktop comes up in
Administration&#8594;Budgie Desktop Settings. Many users would probably want OpenCPN and KIP Dashboard
right away.</p>
</div>
</div>
<div class="sect2">
<h3 id="running_with_higher_resolution_monitors">4.9. Running with Higher Resolution Monitors</h3>
<div class="paragraph">
<p>With higher resolution monitors you might want to adjust font size and UI elements to be bigger on your screen.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Go into Administration/Settings/Universal Access</p>
</li>
<li>
<p>Turn on 'Large Text', set 'Cursor Size' to 'Medium' (Or go into Budgie Desktop Preferences and increase font scaling there.
Decreasing scaling below 1 is also useful on monitors with lower resolutions)</p>
</li>
<li>
<p>In OpenCPN go to Tools/Options/User Interface</p>
</li>
<li>
<p>Set 'User Interface Scale Factor' slider (and all other sliders) to 1</p>
</li>
<li>
<p>Press 'OK' to apply settings</p>
</li>
<li>
<p>Icon sizes of desktop toolbar are controlled by toolbar size in Budgie Desktop Preferences</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_setting_up_multiple_wi_fi_access_points">4.10. Setting up multiple Wi-Fi access points</h3>
<div class="paragraph">
<p>For seamless switching for Wi-Fi client from one access point to another you can set up all access points
with the same SSID and credentials on different radio frequency channels.</p>
</div>
</div>
<div class="sect2">
<h3 id="_watchdog">4.11. Watchdog</h3>
<div class="paragraph">
<p>Raspberry Pi has built in hardware which allows automatic restarts in case
it freezes.</p>
</div>
<div class="paragraph">
<p>To enable this functionality you would need to add:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>RuntimeWatchdogSec=10
ShutdownWatchdogSec=5min</code></pre>
</div>
</div>
<div class="paragraph">
<p>into /etc/systemd/system.conf, reboot, then check watchdog:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">systemctl show | grep -i watchdog
dmesg | grep watchdog</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">RuntimeWatchdogUSec=10s
ShutdownWatchdogUSec=5min
ServiceWatchdogs=yes
[ 3.125165] bcm2835-wdt bcm2835-wdt: Broadcom BCM2835 watchdog timer
[ 5.200029] systemd[1]: Hardware watchdog 'Broadcom BCM2835 Watchdog timer', version 0
[ 5.206438] systemd[1]: Set hardware watchdog to 10s.</code></pre>
</div>
</div>
<div class="paragraph">
<p>To test:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sudo su
echo 1 &gt; /proc/sys/kernel/sysrq
echo "c" &gt; /proc/sysrq-trigger</code></pre>
</div>
</div>
<div class="paragraph">
<p>More details here:
<a href="https://pysselilivet.blogspot.com/2021/10/raspberry-pi-watchdog-made-simple.html" class="bare">https://pysselilivet.blogspot.com/2021/10/raspberry-pi-watchdog-made-simple.html</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_troubleshooting_devttyxxxx_device_or_resource_busy">4.12. Troubleshooting /dev/ttyXXXX device or resource busy</h3>
<div class="paragraph">
<p>If you get this message likely there is another process which opened /dev/ttyXXXX.
To find out the source of the conflict you can use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sudo lsof /dev/ttyXXXX</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once you disable a process from using a serial port you are troubleshooting,
you should be able to just</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cat /dev/ttyXXXX</code></pre>
</div>
</div>
<div class="paragraph">
<p>and see the data flow.</p>
</div>
<div class="paragraph">
<p>If it shows some unexpected binary data for a text protocol you can (and should) experiment with baud rate.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">stty -F /dev/ttyXXXX 4800
cat /dev/ttyXXXX</code></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">stty -F /dev/ttyXXXX 38400
cat /dev/ttyXXXX</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_display_what_serial_devices_you_have">4.13. Display what serial devices you have</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sudo python3 -m serial.tools.list_ports -v -s</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_display_what_usb_devices_you_have">4.14. Display what USB devices you have</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sudo usb-devices</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_additional_software_via_pi_apps">4.15. Additional software via pi-apps</h3>
<div class="paragraph">
<p>See: <a href="https://github.com/Botspot/pi-apps" class="bare">https://github.com/Botspot/pi-apps</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_good_ides_for_programmers">4.16. Good IDEs for programmers</h3>
<div class="ulist">
<ul>
<li>
<p>IntelliJ Idea (Community Edition) for Java <a href="https://www.jetbrains.com/idea/download/#section=linux" class="bare">https://www.jetbrains.com/idea/download/#section=linux</a></p>
</li>
<li>
<p>PyCharm (Community Edition) for Python <a href="https://www.jetbrains.com/pycharm/download/#section=linux" class="bare">https://www.jetbrains.com/pycharm/download/#section=linux</a></p>
</li>
<li>
<p>WxFormBuilder for UI App Design for Python <a href="https://github.com/wxFormBuilder/wxFormBuilder" class="bare">https://github.com/wxFormBuilder/wxFormBuilder</a></p>
</li>
<li>
<p>Visual Studio Code for C/C++</p>
</li>
<li>
<p>Arduino IDE for micro-controllers C/C++</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_video_editing">4.17. Video Editing</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sudo apt install openshot</code></pre>
</div>
</div>
<div class="paragraph">
<p>or another program</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sudo apt install shotcut</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_how_to_mount_imu">4.18. How to mount IMU</h3>
<div class="paragraph">
<p>IMU PCBs are marked with X-Y-Z labels. There are two conventions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ENU (X-East, Y-North, Z-Up)</p>
</li>
<li>
<p>NED (X-North, Y-East, Z-Down)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Check what your IMU shows according to the diagram on its board. Mount your IMU in a waterproof
box outside your Pi away from magnetic fields, and close to midline of the vessel.</p>
</div>
</div>
<div class="sect2">
<h3 id="_waveshare_10_dof_install">4.19. WaveShare 10 dof install</h3>
<div class="paragraph">
<p>This is what I had to do to set up WaveShare 10 dof v2 &#169; IMU and baro/temp sensors.</p>
</div>
<div class="paragraph">
<p>After connecting 4 wires to Pi GPIO pins (as per vendor instructions) for IMU
to work I just needed to restart pypilot.</p>
</div>
<div class="paragraph">
<p>For baro/temp sensors (which are part of Waveshare 10 dof) I had to activate
BMP280/BME280 plugin in SignalK. I put 'outside' into SignalK path.
And set polling period to 20 seconds. After that I restarted SignalK and got the values
in SignalK data feed.</p>
</div>
</div>
<div class="sect2">
<h3 id="_sound_via_hdmi">4.20. Sound via HDMI</h3>
<div class="paragraph">
<p>To make sure that sound works via HDMI (when you enable so in other programs)
edit the /boot/config.txt and set hdmi_drive=2 in it.</p>
</div>
</div>
<div class="sect2">
<h3 id="_opencpn_upgrade">4.21. OpenCPN upgrade</h3>
<div class="paragraph">
<p>Making a backup copy of your disk is recommended before doing big changes to your system.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sudo apt update
sudo apt install opencpn</code></pre>
</div>
</div>
<div class="paragraph">
<p>Start OpenCPN and update catalog in Plugin Download Manager. Then update plugins one by one.</p>
</div>
</div>
<div class="sect2">
<h3 id="_rtl_sdr">4.22. RTL SDR</h3>
<div class="paragraph">
<p>Blacklist interfering Linux RTL drivers</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sudo bash -c 'cat &lt;&lt; EOF &gt; /etc/modprobe.d/no-rtl.conf
blacklist dvb_usb_rtl28xxu
blacklist rtl2832
blacklist rtl2830
EOF'</code></pre>
</div>
</div>
<div class="paragraph">
<p>reboot</p>
</div>
<div class="paragraph">
<p>Example: The following command will play FM 104.3 MHz Station on your speaker:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">rtl_fm -M wbfm -f 104.3M | play -r 32k -t raw -e s -b 16 -c 1 -V1 -</code></pre>
</div>
</div>
<div class="paragraph">
<p>Other things to play with (Inmarsat Decoders):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cd ~/add-ons
sudo ./stdc-install.sh</code></pre>
</div>
</div>
<div class="paragraph">
<p>Check how to use combo of stdc_demod, stdc_decoder, stdc_parser (<a href="https://github.com/cropinghigh/stdcdec" class="bare">https://github.com/cropinghigh/stdcdec</a>)</p>
</div>
<div class="sect3">
<h4 id="_rtl_ais">4.22.1. RTL AIS</h4>
<div class="ulist">
<ul>
<li>
<p>Connect your RTL SDR to USB of your Pi and to VHF (AIS) antenna.</p>
</li>
<li>
<p>From menu Administration/Service Management enable rtl-ais service.</p>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sudo systemctl enable rtl-ais
sudo systemctl start rtl-ais</code></pre>
</div>
</div>
</li>
<li>
<p>Login into SignalK web UI with administrator privileges.</p>
</li>
<li>
<p>Enable rtl_ais_tcp data connection under Server/Data Connections menu.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Depending on your RTL model you might need to blacklist native drivers, see above:
"Blacklist interfering Linux RTL drivers"</p>
</div>
<div class="paragraph">
<p>Some (older models) SDRs need crystal oscillator calibration (which can drift with temperature and over time).
If you calibrated your SDR and know its ppm you can pass it as an additional parameter
with -p option by editing rts-ais service file in /etc/systemd/system/rtl-ais.service.
Add</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">-p &lt;your-ppm-value&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>to the arguments of rtl_ais.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_tripwire">4.23. Tripwire</h3>
<div class="paragraph">
<p>Open Source Tripwire® is a security and data integrity tool for monitoring and alerting on file &amp; directory changes.
See: <a href="https://github.com/Tripwire/tripwire-open-source" class="bare">https://github.com/Tripwire/tripwire-open-source</a></p>
</div>
<div class="paragraph">
<p>Install:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cd ~/add-ons
./tripwire-install.sh</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_setting_up_your_system_as_ntp_time_server">4.24. Setting up your system as NTP (time) server</h3>
<div class="paragraph">
<p>Your NTP server is chrony. Edit /etc/chrony/chrony.conf and add a line with 'allow' directive</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>allow</code></pre>
</div>
</div>
<div class="paragraph">
<p>(or better allow followed by your subnet address). Save the file and restart chronyd</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sudo systemctl restart chrony</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_renaming_host">4.25. Renaming host</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sudo /usr/local/sbin/bbn-rename-host &lt;my-new-host-name&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_profiling_opencpn">4.26. Profiling OpenCPN</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sudo apt install linux-perf-5.10
opencpn
perf top -p $(pidof opencpn)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_list_dependencies_of_a_package">4.27. List dependencies of a package</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">apt-cache depends --recurse --no-recommends --no-suggests --no-conflicts --no-breaks --no-replaces --no-enhances &lt;your-package-here&gt; | grep "^\w" | sort -u</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_how_to_use_vnc_without_monitor_attached_to_pi">4.28. How to use VNC without monitor attached to pi</h3>
<div class="paragraph">
<p>You need to set up fixed resolution using</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sudo raspi-config</code></pre>
</div>
</div>
<div class="paragraph">
<p>Without it VNC would show message that it couldn&#8217;t show desktop.</p>
</div>
</div>
<div class="sect2">
<h3 id="_usb_over_ip">4.29. USB over IP</h3>
<div class="paragraph">
<p><a href="https://developer.ridgerun.com/wiki/index.php?title=How_to_setup_and_use_USB/IP" class="bare">https://developer.ridgerun.com/wiki/index.php?title=How_to_setup_and_use_USB/IP</a></p>
</div>
<div class="paragraph">
<p><a href="https://derushadigital.com/other%20projects/2019/02/19/RPi-USBIP-ZWave.html" class="bare">https://derushadigital.com/other%20projects/2019/02/19/RPi-USBIP-ZWave.html</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_remote_desktop_with_nomachine">4.30. Remote Desktop with NoMachine</h3>
<div class="paragraph">
<p>NoMachine might ba a better alternative to VNC.</p>
</div>
<div class="paragraph">
<p>Download and install NoMachine for Raspberry arm64 DEB (Bullseye) from
<a href="https://download.nomachine.com/download/8.1/Raspberry/nomachine_8.1.2_1_arm64.deb" class="bare">https://download.nomachine.com/download/8.1/Raspberry/nomachine_8.1.2_1_arm64.deb</a></p>
</div>
<div class="paragraph">
<p>Install command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sudo dpkg -i nomachine_&lt;version&gt;_arm64.deb</code></pre>
</div>
</div>
<div class="paragraph">
<p>Install NoMachine on the connecting client.
For cloud version configuration see: <a href="https://www.nomachine.com/all-documents" class="bare">https://www.nomachine.com/all-documents</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_vr_remote_controller_for_raspberry_pi">4.31. VR Remote Controller for Raspberry Pi</h3>
<div class="paragraph">
<p>Those can be used with one hand. They have number of buttons and a joystick.
Can be a good input device for controlling chartplotter, autopilot, bow thruster, anchor windlass, etc</p>
</div>
</div>
<div class="sect2">
<h3 id="_free_cloudflare_tunnel_to_homeassistant">4.32. Free Cloudflare Tunnel To HomeAssistant</h3>
<div class="paragraph">
<p><a href="https://peyanski.com/connecting-cloudflare-tunnel-to-home-assistant/" class="bare">https://peyanski.com/connecting-cloudflare-tunnel-to-home-assistant/</a></p>
</div>
</div>
<div class="sect2">
<h3 id="airmail">4.33. Install AirMail on Raspberry Pi</h3>
<div class="paragraph">
<p>AirMail is a radio mail program for sending and receiving messages via Pactor over HF radio,
either via the ham radio system or participating marine and commercial services.
It can communicate with PACTOR modem and other HF radio devices.</p>
</div>
<div class="paragraph">
<p>To install AirMail on Raspberry Pi follow this guide:
<a href="https://bareboat-necessities.github.io/my-bareboat/airmail-install.html" class="bare">https://bareboat-necessities.github.io/my-bareboat/airmail-install.html</a></p>
</div>
</div>
<div class="sect2">
<h3 id="sasplanet">4.34. Install SAS.Planet on Raspberry Pi</h3>
<div class="paragraph">
<p>SAS.Planet is a popular in offshore sailing community free and opensource program to prepare free off-line raster charts
for OpenCPN from GoogleEarth and others satellite images. More on the subject:</p>
</div>
<div class="paragraph">
<p><a href="http://svocelot.com/Cruise_Info/Equipment/mbTiles.htm" class="bare">http://svocelot.com/Cruise_Info/Equipment/mbTiles.htm</a></p>
</div>
<div class="paragraph">
<p>And some prepared charts:
<a href="http://svocelot.com/Cruise_Info/Equipment/KAP_Downloads.htm" class="bare">http://svocelot.com/Cruise_Info/Equipment/KAP_Downloads.htm</a></p>
</div>
<div class="paragraph">
<p>To install SAS.Planet on Raspberry Pi follow this guide:
<a href="https://bareboat-necessities.github.io/my-bareboat/sasplanet-install.html" class="bare">https://bareboat-necessities.github.io/my-bareboat/sasplanet-install.html</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_install_qgis_gis">4.35. Install QGIS GIS</h3>
<div class="paragraph">
<p>Another program used for creating DIY charts and mbtiles is QGIS.
To install:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sudo apt-get -y install qgis
reboot</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_protecting_electronics_from_environment">4.36. Protecting Electronics from Environment</h3>
<div class="ulist">
<ul>
<li>
<p>Search for "Conformal Coating".</p>
</li>
<li>
<p>Waterproof IP67 boxes and cable glands</p>
</li>
<li>
<p>Search for "Drip loop"</p>
</li>
<li>
<p>Waterproof hot clue</p>
</li>
<li>
<p>Waterproof heat shrink tubing</p>
</li>
<li>
<p>Epoxy potting for electronics</p>
</li>
<li>
<p>Dielectric grease for electrical connectors</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_how_to_enable_hardware_acceleration_in_chromium_on_raspberry_pi_os_rpi_4">4.37. How To Enable Hardware Acceleration In Chromium On Raspberry Pi OS (RPi 4)</h3>
<div class="paragraph">
<p><a href="https://www.linuxuprising.com/2021/04/how-to-enable-hardware-acceleration-in.html" class="bare">https://www.linuxuprising.com/2021/04/how-to-enable-hardware-acceleration-in.html</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_sailing_performance_dashboard">4.38. Sailing Performance Dashboard</h3>
<div class="paragraph">
<p>See Capolavoro Sailing PD at: <a href="https://www.capolavoro.nl/" class="bare">https://www.capolavoro.nl/</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_screen_recording">4.39. Screen Recording</h3>
<div class="paragraph">
<p><a href="https://github.com/vkohaupt/vokoscreenNG" class="bare">https://github.com/vkohaupt/vokoscreenNG</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sudo apt-get -y install vokoscreen</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_calculating_wave_heightperiod_from_a_moving_boat_using_imu_accelerometer">4.40. Calculating wave height/period from a moving boat using IMU accelerometer</h3>
<div class="paragraph">
<p>Also, the link provides a method to estimate true wind from course over ground and actual true heading
based on apparent wind measurements.</p>
</div>
<div class="paragraph">
<p><a href="https://bareboat-necessities.github.io/my-bareboat/bareboat-math.html" class="bare">https://bareboat-necessities.github.io/my-bareboat/bareboat-math.html</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_finances_and_accounting">4.41. Finances and Accounting</h3>
<div class="paragraph">
<p><a href="http://homebank.free.fr/en/" class="bare">http://homebank.free.fr/en/</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">sudo apt-get -y install homebank</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_setting_up_monitor">4.42. Setting up monitor</h3>
<div class="paragraph">
<p>/boot/config.txt contains most important settings for your monitor. You might need to adjust them manually.</p>
</div>
<div class="paragraph">
<p>See:</p>
</div>
<div class="paragraph">
<p><a href="https://www.raspberrypi.com/documentation/computers/config_txt.html#video-options" class="bare">https://www.raspberrypi.com/documentation/computers/config_txt.html#video-options</a></p>
</div>
<div class="paragraph">
<p><a href="https://www.raspberrypi.com/documentation/computers/config_txt.html#common-display-options" class="bare">https://www.raspberrypi.com/documentation/computers/config_txt.html#common-display-options</a></p>
</div>
<div class="paragraph">
<p>Here are few tip to resolve most common issues. (For touch related issues see different parts of this document)</p>
</div>
<div class="paragraph">
<p>Common issues:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Borders on monitor. Check overscan related settings.</p>
</li>
<li>
<p>Icons on desktop do not appear square. Not optimal resolution is set in config.txt resulting in wrong aspect ratio.</p>
</li>
<li>
<p>I need sound to come out of monitor via HDMI. Set hdmi_drive=2 in /boot/config.txt. (Some individual programs might
also require changes in their own settings)</p>
</li>
<li>
<p>Maximized windows appears cut from the screen. Check aspect ratio and HDMI mode related settings for
your monitor in /boot/config.txt (read about hdmi_cvt options)</p>
</li>
<li>
<p>I have high resolution monitor and all icons and fonts are too small. See <a href="#running_with_higher_resolution_monitors">Running with Higher Resolution Monitors</a></p>
</li>
<li>
<p>Common parameters to look for are: hdmi_cvt, hdmi_drive, hdmi_group, hdmi_mode, disable_fw_kms_setup,
disable_overscan, overscan_*</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Versions with KMS driver such as bookworm (instead of fkms in older ones as buster) ignore screen resolution settings in /boot/config.txt.
KMS driver takes video parameters from /boot/cmdline.txt. Like this:
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>vc4.force_hotplug=1 video=HDMI-A-1:1280x720@60</code></pre>
</div>
</div>
<div class="paragraph">
<p>HDMI-A-1  - name of your screen</p>
</div>
<div class="paragraph">
<p>1280x720  - its resolution</p>
</div>
<div class="paragraph">
<p>60        - refresh frequency in Hz</p>
</div>
<div class="paragraph">
<p>/boot/config.txt needs setting:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>disable_fw_kms_setup=0</code></pre>
</div>
</div>
<div class="paragraph">
<p>For XServer resolution add into your GUI start-up script (such as openbox autostart, etc)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code># Example
xrandr --output HDMI-1 --mode 640x480 --rate 60</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_rotate_screen">4.43. Rotate Screen</h3>
<div class="paragraph">
<p>There are reports that putting</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>lcd_rotate=2</code></pre>
</div>
</div>
<div class="paragraph">
<p>into /boot/config.txt works. However, it might be specific to a monitor model.</p>
</div>
</div>
<div class="sect2">
<h3 id="_touchthink_marine_hdmi_touchscreen">4.44. TouchThink Marine HDMI Touchscreen</h3>
<div class="paragraph">
<p><a href="https://www.touchtecs.com/" class="bare">https://www.touchtecs.com/</a> produces reasonably priced touchscreen, which can be used in a cockpit.</p>
</div>
<div class="paragraph">
<p>The product is coded as TouchThink TPC-CD-M101, but you have to spec out your order precisely:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>10.1 inch, 1280*800 16:10</p>
</li>
<li>
<p>10 points capacitive touch screen monitor, optically bonded</p>
</li>
<li>
<p>1000nit high brightness, -20 to 70 degree wide use temperature.</p>
</li>
<li>
<p>industrial front IP67 waterproof dust-proof vehicle use aluminum alloy bezel style.</p>
</li>
<li>
<p>7H hardness tempered glass grade A</p>
</li>
<li>
<p>with 12-36V DC.</p>
</li>
<li>
<p>waterproof aviation ports: HDMI+touch+DC</p>
</li>
<li>
<p>build-in HDMI speakers (on sides under bezel)</p>
</li>
<li>
<p>front light sensor, photo sensitive head. change brightness with ambient light</p>
</li>
<li>
<p>VESA mountable</p>
</li>
<li>
<p>5 waterproof control buttons on front bezel</p>
</li>
<li>
<p>front status light indicator</p>
</li>
<li>
<p>with Aviation port to standard port cables: HDMI cable, with touch cable, DC pigtail power cable, with AC/DC power adapter.
The EXW price is ~us$222/unit for 1-50 units.</p>
</li>
<li>
<p>Ask for a gasket with a panel flush mount kit too.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>udevadm info reports this device name as "WingCool Inc. TouchScreen"</p>
</div>
<div class="paragraph">
<p>You can also request an embedded version with EDATech CM4 module built-in:</p>
</div>
<div class="paragraph">
<p><a href="https://www.edatec.cn/en/Product/Camera_Modules/2019/0826/76.html" class="bare">https://www.edatec.cn/en/Product/Camera_Modules/2019/0826/76.html</a></p>
</div>
<div class="paragraph">
<p>and customize interfaces. For example, you can have Ethernet, USB, I2C on the back.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_it_is_made">5. How it is Made</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For those who are comfortable writing software the scripts to create this image
stored on the image itself (for the reference) in /install_scripts.
The full source code to create the image is available at: <a href="https://github.com/bareboat-necessities/lysmarine_gen" class="bare">https://github.com/bareboat-necessities/lysmarine_gen</a></p>
</div>
<div class="paragraph">
<p>The code should be much easier to understand than openplotter. The code is really just a script of commands
you run to get things installed.</p>
</div>
<div class="sect2">
<h3 id="_building_without_circleci">5.1. Building without CircleCi</h3>
<div class="paragraph">
<p>Install Ubuntu 16.04.7 64-bit on PC. Run from shell:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">curl -L \
 https://raw.githubusercontent.com/bareboat-necessities/my-bareboat/master/bbn-os-build/bbn-os-build-on-ubuntu.sh \
 | sudo bash</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comparison_vs_openplotter">6. Comparison vs OpenPlotter</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See:
<a href="https://bareboat-necessities.github.io/my-bareboat/bareboat-necessities-vs-openplotter.html" class="bare">https://bareboat-necessities.github.io/my-bareboat/bareboat-necessities-vs-openplotter.html</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cost_of_open_source_system_vs_commercial_marine_electronics">7. Cost of Open Source System vs Commercial Marine Electronics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>How much* does it cost to build my system? Does it cost less than commercial marine products?
The answer is really depends on what you are trying to achieve.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open source like BBN OS have features simply not available in traditional marine electronics</p>
</li>
<li>
<p>Your cost-effective solution for your boat is going to be a mix of commercial and open products</p>
</li>
<li>
<p>If you just need a chart plotter in a cockpit then a commercial product will do</p>
</li>
<li>
<p>If you want a smart boat with a lot of sensors then you need to get smart about open source options</p>
</li>
<li>
<p>If you live aboard and need a board computer then look at BBN OS and lower power consuming Pi</p>
</li>
<li>
<p>With commercial products you end up with lots of black boxes with expensive proprietary connectors and plugs</p>
</li>
<li>
<p>With open source you have modular system in which components are easier replaceable and way cheaper</p>
</li>
<li>
<p>Day cruiser within cellphone receptions will be fine with a smart tablet or phone</p>
</li>
<li>
<p>Live aboard person or someone who cruises for weeks and offshore sailors can benefit greatly from BBN OS and other
open source systems</p>
</li>
<li>
<p>If you want a boat computer below deck (non-waterproof screen and computer) even if you are just a day sailor
then you can build much cheaper system with open source like BBN OS combined with sensors you have onboard</p>
</li>
<li>
<p>Consider other features costs like onboard entertainment (music, videos watching) and cameras</p>
</li>
<li>
<p>Internet connectivity on your boat via Wi-Fi at marinas or via LTE and a local boat Wi-Fi hotspot is an important feature to have</p>
</li>
<li>
<p>For offshore sailors with SSB radio experience consider what you can have with open source solutions on Pi</p>
</li>
<li>
<p>DIY solutions for autopilot can be quite cost-effective (You don&#8217;t need whole BBN OS for it)</p>
</li>
<li>
<p>Knowledge costs money. With commercial electronics your knowledge is dialing service support line. With
open source you will learn how things work</p>
</li>
<li>
<p>Commercial sailing software is just as expensive as the hardware. Ex: <a href="https://www.expeditionmarine.com/" class="bare">https://www.expeditionmarine.com/</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 2024-02-03<br>
</div>
</div>
</body>
</html>